theme_vanilla()
#| label: contrasts
#| tbl-cap: Contrasts of Estimated Marginal Means
# contrasts
emm <- emmeans(mod4b, ~ x, at = list(x = c(20,30,50,60)))
custom <- list(`Change in Y corresponding to change in X from 20 to 30` = c(-1,1,0,0),
`Change in Y corresponding to change in X from 50 to 60` = c(0,0,-1,1))
contrast(emm, custom) |>
summary(infer = T) |>
data.frame() |>
select(c(-df, -t.ratio)) |>
rename("Contrast" = "contrast",
"Estimate" = "estimate",
"95% C.I. (lower)" = "lower.CL",
"95% C.I. (upper)" = "upper.CL",
"p" = "p.value") |>
flextable() |>
colformat_double(digits = 3, na_str = "N/A") |>
set_table_properties(layout = "autofit") |>
height(height = 1, unit = "cm") |>
hrule(rule = "atleast", part = "header") |>
align(align = "center", part = "body") |>
bg(bg = "white", part = "all") |>
flextable::font(fontname = "Consolas", part = "all") |>
theme_vanilla()
expand.grid(data.frame(gre = seq(0,800,1)))
expand.grid(data.frame(gre = seq(0,800,1), sex = c("m","f")))
data.frame(expand.grid(gre = seq(0,800,1), sex = c("m","f")))
a <- data.frame(expand.grid(gre = seq(0,800,1), sex = c("m","f")))
a
View(a)
install.packages("icenReg")
library(icenReg)
data("IR_diabetes", package = "icenReg")
View(IR_diabetes)
npmleFit <- ic_np(cbind(left, right) ~ gender, data = IR_diabetes)
npmleFit
summary(npmleFit)
plot(npmleFit, main = "NPMLE by gender", col = c("blue", "orange"))
diag_covar(cbind(left, right) ~ gender, data = IR_diabetes, + model = "ph", col = c("blue", "orange"))
diag_covar(cbind(left, right) ~ gender, data = IR_diabetes, model = "ph", col = c("blue", "orange"))
library("doParallel")
install.packages("doParallel")
library("doParallel")
myClust <- makeCluster(2)
registerDoParallel(myClust)
sp_fit <- ic_sp(cbind(left, right) ~ gender, model = "ph", + data = IR_diabetes, bs_samples = 1000, useMCores = TRUE)
sp_fit <- ic_sp(cbind(left, right) ~ gender, model = "ph", data = IR_diabetes, bs_samples = 1000, useMCores = TRUE)
myClust <- makeCluster(2)
registerDoParallel(myClust)
sp_fit <- ic_sp(cbind(left, right) ~ gender, model = "ph", data = IR_diabetes, bs_samples = 1000, useMCores = TRUE)
myClust <- makeCluster(16)
registerDoParallel(myClust)
sp_fit <- ic_sp(cbind(left, right) ~ gender, model = "ph", data = IR_diabetes, bs_samples = 1000, useMCores = TRUE)
stopCluster(myClust)
myClust
summary(sp_fit)
#| label: setup
#| message: false
data("CO2")
#| label: setup
#| message: false
data("genderweight", package = "datarium")
install.packages("datarium")
#| label: setup
#| message: false
data("genderweight", package = "datarium")
force(genderweight)
#| label: data
#| message: false
library(kableExtra)
data("genderweight", package = "datarium")
head(genderweight, 10)
#| label: ttest
#| message: false
t.test(weight ~ group) |>
kable()
#| label: data
#| message: false
library(kableExtra)
data("genderweight", package = "datarium")
head(genderweight, 10)
#| label: ttest
#| message: false
t.test(weight ~ group, data = genderweight) |>
kable()
#| label: data
#| message: false
library(kableExtra)
data("genderweight", package = "datarium")
head(genderweight, 10)
#| label: ttest
#| message: false
t.test(weight ~ group, data = genderweight)
#| label: data
#| message: false
library(kableExtra)
data("genderweight", package = "datarium")
head(genderweight, 10)
#| label: ttest
#| message: false
t.test(weight ~ group, data = genderweight)
#| label: lm
#| message: false
summary(lm(weight ~ group, data = genderweight))
str(genderweight$group)
levels(genderweight$group)
#| label: data
#| message: false
library(kableExtra)
data("genderweight", package = "datarium")
head(genderweight, 10)
#| label: ttest
#| message: false
t.test(weight ~ group, data = genderweight)
#| label: lm
#| message: false
summary(lm(weight ~ group, data = genderweight))
#| label: data
#| message: false
library(kableExtra)
data("genderweight", package = "datarium")
head(genderweight, 10)
#| label: ttest
#| message: false
t.test(weight ~ group, data = genderweight)
#| label: lm
#| message: false
summary(lm(weight ~ group, data = genderweight))
#| label: ci
#| message: false
confint(lm(weight ~ group, data = genderweight))
#| label: data
#| message: false
library(kableExtra)
data("genderweight", package = "datarium")
head(genderweight, 10)
#| label: ttest
#| message: false
t.test(weight ~ group, data = genderweight, var.equal = T)
#| label: lm
#| message: false
summary(lm(weight ~ group, data = genderweight))
#| label: ci
#| message: false
confint(lm(weight ~ group, data = genderweight))
#| label: data
#| message: false
library(kableExtra)
data("genderweight", package = "datarium")
head(genderweight, 10)
#| label: ttest
#| message: false
t.test(weight ~ group, data = genderweight)
#| label: lm
#| message: false
summary(lm(weight ~ group, data = genderweight))
#| label: ci
#| message: false
confint(lm(weight ~ group, data = genderweight))
#| label: lm
#| message: false
summary(lm(weight ~ 1 + group, data = genderweight))
#| label: lm
#| message: false
summary(lm(weight ~ 1 - group, data = genderweight))
#| label: lm
#| message: false
summary(lm(weight ~ group - 1, data = genderweight))
#| label: data
#| message: false
library(kableExtra)
data("genderweight", package = "datarium")
head(genderweight, 10)
#| label: ttest
#| message: false
t.test(weight ~ group, data = genderweight)
#| label: lm
#| message: false
summary(lm(weight ~ group, data = genderweight))
#| label: ci
#| message: false
confint(lm(weight ~ group, data = genderweight))
#| label: lm2
#| message: false
summary(lm(weight ~ group - 1, data = genderweight))
#| label: data
#| message: false
library(ggplot2)
data("genderweight", package = "datarium")
head(genderweight, 10)
#| label: plot
#| message: false
ggplot(genderweight, aes(x = group, y = weight)) +
geom_point() +
stat_summary(
fun.y = mean,
geom = "errorbar",
aes(ymax = ..y.., ymin = ..y..),
position = position_dodge(width = 0.3),
width = 0.25);
#| label: plot
#| message: false
ggplot(genderweight, aes(x = group, y = weight)) +
geom_point() +
stat_summary(fun.y = mean,
geom = "errorbar",
aes(ymax = ..y.., ymin = ..y..),
width = 0.25)
#| label: plot
#| message: false
ggplot(genderweight, aes(x = group, y = weight)) +
geom_point() +
stat_summary(fun.y = mean,
geom = "errorbar",
aes(ymax = ..y.., ymin = ..y..),
width = 0.25) +
theme_bw(base_size = 20)
#| label: plot
#| message: false
ggplot(genderweight, aes(x = group, y = weight)) +
geom_point(size = 2) +
stat_summary(fun.y = mean,
geom = "errorbar",
aes(ymax = ..y.., ymin = ..y..),
width = 0.25) +
theme_bw(base_size = 20)
#| label: plot
#| message: false
ggplot(genderweight, aes(x = group, y = weight)) +
geom_point(size = 3) +
stat_summary(fun.y = mean,
geom = "errorbar",
aes(ymax = ..y.., ymin = ..y..),
width = 0.25) +
theme_bw(base_size = 20)
#| label: plot
#| message: false
ggplot(genderweight, aes(x = group, y = weight)) +
geom_point(size = 3, position = position_dodge(width = 0.3)) +
stat_summary(fun.y = mean,
geom = "errorbar",
aes(ymax = ..y.., ymin = ..y..),
width = 0.25) +
theme_bw(base_size = 20)
#| label: plot
#| message: false
ggplot(genderweight, aes(x = group, y = weight)) +
geom_jitter(size = 3, position = position_dodge(width = 0.3)) +
stat_summary(fun.y = mean,
geom = "errorbar",
aes(ymax = ..y.., ymin = ..y..),
width = 0.25) +
theme_bw(base_size = 20)
#| label: plot
#| message: false
ggplot(genderweight, aes(x = group, y = weight)) +
geom_jitter(size = 3, position = "jitter") +
stat_summary(fun.y = mean,
geom = "errorbar",
aes(ymax = ..y.., ymin = ..y..),
width = 0.25) +
theme_bw(base_size = 20)
#| label: plot
#| message: false
ggplot(genderweight, aes(x = group, y = weight)) +
geom_jitter(size = 3, position = "jitter", width = 2) +
stat_summary(fun.y = mean,
geom = "errorbar",
aes(ymax = ..y.., ymin = ..y..),
width = 0.25) +
theme_bw(base_size = 20)
#| label: plot
#| message: false
ggplot(genderweight, aes(x = group, y = weight)) +
geom_jitter(size = 3, position = "jitter", width = 0.1) +
stat_summary(fun.y = mean,
geom = "errorbar",
aes(ymax = ..y.., ymin = ..y..),
width = 0.25) +
theme_bw(base_size = 20)
#| label: plot
#| message: false
ggplot(genderweight, aes(x = group, y = weight)) +
geom_jitter(size = 3, width = 0.1) +
stat_summary(fun.y = mean,
geom = "errorbar",
aes(ymax = ..y.., ymin = ..y..),
width = 0.25) +
theme_bw(base_size = 20)
#| label: plot
#| message: false
ggplot(genderweight, aes(x = group, y = weight)) +
geom_jitter(size = 3, width = 0.01) +
stat_summary(fun.y = mean,
geom = "errorbar",
aes(ymax = ..y.., ymin = ..y..),
width = 0.25) +
theme_bw(base_size = 20)
#| label: plot
#| message: false
ggplot(genderweight, aes(x = group, y = weight)) +
geom_jitter(size = 3, width = 0.05) +
stat_summary(fun.y = mean,
geom = "errorbar",
aes(ymax = ..y.., ymin = ..y..),
width = 0.25) +
theme_bw(base_size = 20)
#| label: plot
#| message: false
ggplot(genderweight, aes(x = group, y = weight)) +
geom_jitter(size = 3, width = 0.05) +
scale_y_continuous(limits = c(50, 100), breaks = seq(50, 100, by = 10)) +
stat_summary(fun.y = mean,
geom = "errorbar",
aes(ymax = ..y.., ymin = ..y..),
width = 0.25) +
theme_bw(base_size = 20)
#| label: plot
#| message: false
ggplot(genderweight, aes(x = group, y = weight)) +
geom_jitter(size = 3, width = 0.05) +
scale_y_continuous(limits = c(50, 100), breaks = seq(50, 100, by = 10)) +
stat_summary(fun = mean,
geom = "errorbar",
aes(ymax = ..y.., ymin = ..y..),
width = 0.25) +
theme_bw(base_size = 20)
#| label: plot
#| message: false
ggplot(genderweight, aes(x = group, y = weight)) +
geom_jitter(size = 3, width = 0.05) +
scale_y_continuous(limits = c(50, 100), breaks = seq(50, 100, by = 10)) +
stat_summary(fun = mean,
geom = "errorbar",
aes(ymax = after_stat(y), ymin = after_stat(y)),
width = 0.25) +
theme_bw(base_size = 20)
#| label: load data
#| include: false
dat <- read.csv("/Users/paulsanfilippo/Dropbox/Alfred Neuroscience/zz_test_site/posts/011_03May_2024/Supplementary Table 1 for patient info .csv", header = T)
#| label: load data
#| include: false
dat <- read.csv("/Users/paulsanfilippo/Dropbox/Alfred Neuroscience/zz_test_site/posts/011_03May_2024/Supplementary Table 1 for patient info .csv", header = T)
#| label: data
head(dat, 10)
#| label: load data
#| include: false
dat <- read.csv("/Users/paulsanfilippo/Dropbox/Alfred Neuroscience/zz_test_site/posts/011_03May_2024/Supplementary Table 1 for patient info .csv", header = T)
#| label: data
head(dat, 10)
str(dat)
#| label: load data
#| include: false
dat <- read.csv("/Users/paulsanfilippo/Dropbox/Alfred Neuroscience/zz_test_site/posts/011_03May_2024/Supplementary Table 1 for patient info .csv", header = T)
#| label: data
head(dat, 10)
#| label: sum_tab1
library(gtsummary)
dat |>
select(-ID) |>
tbl_summary(
by = Types.of.Medicines,
statistic = list(all_continuous() ~ "{median} ({p25},{p75})",
all_categorical() ~ "{n}/{N} ({p}%)"),
digits = all_continuous() ~ 2,
missing_text = "(Missing)") |>
add_overall()
#| label: sum_tab1
library(gtsummary)
dat |>
select(-ID) |>
tbl_summary(
by = Types.of.Medicines,
statistic = list(all_continuous() ~ "{median} ({p25},{p75})",
all_categorical() ~ "{n}/{N} ({p}%)"),
digits = all_continuous() ~ 2) |>
add_overall()
names(dat)
#| label: load data
#| include: false
dat <- read.csv("/Users/paulsanfilippo/Dropbox/Alfred Neuroscience/zz_test_site/posts/011_03May_2024/Supplementary Table 1 for patient info .csv", header = T)
#| label: data
head(dat, 10)
#| label: sum_tab1
library(gtsummary)
dat |>
select(-ID) |>
tbl_summary(
by = Types.of.Medicines,
statistic = list(all_continuous() ~ "{median} ({p25},{p75})",
all_categorical() ~ "{n}/{N} ({p}%)"),
digits = all_continuous() ~ 1) |>
add_overall()
#| label: sum_tab1
library(gtsummary)
dat |>
select(-ID) |>
tbl_summary(
by = Types.of.Medicines,
statistic = list(all_continuous() ~ "{median} ({p25},{p75})",
all_categorical() ~ "{n} ({p}%)"),
digits = all_continuous() ~ 2,
missing_text = "(Missing)",
label = c(Age ~ "Age, yrs - median (IQR)",
Age.of.onset ~ "Age onset, yrs - median (IQR)",
Does.the.time.difference.between.MRI.acquisition.and.EDSS...two.months ~ "Time difference - MRI and EDSS")) |>
modify_table_styling(columns = label,
rows = label == "Drug B",
footnote = "i.e. placebo")
add_overall()
#| label: sum_tab1
library(gtsummary)
dat |>
select(-ID) |>
tbl_summary(
by = Types.of.Medicines,
statistic = list(all_continuous() ~ "{median} ({p25},{p75})",
all_categorical() ~ "{n} ({p}%)"),
digits = all_continuous() ~ 2,
missing_text = "(Missing)",
label = c(Age ~ "Age, yrs - median (IQR)",
Age.of.onset ~ "Age onset, yrs - median (IQR)",
Does.the.time.difference.between.MRI.acquisition.and.EDSS...two.months ~ "Time difference - MRI and EDSS")) |>
modify_table_styling(columns = label,
rows = label == "Drug B",
footnote = "i.e. placebo") |>
add_overall()
#| label: sum_tab1
library(gtsummary)
dat |>
select(-ID) |>
tbl_summary(
by = Types.of.Medicines,
statistic = list(all_continuous() ~ "{median} ({p25},{p75})",
all_categorical() ~ "{n} ({p}%)"),
digits = all_continuous() ~ 2,
missing_text = "(Missing)",
label = c(Age ~ "Age, yrs - median (IQR)",
Age.of.onset ~ "Age onset, yrs - median (IQR)",
Does.the.time.difference.between.MRI.acquisition.and.EDSS...two.months ~ "Time difference - MRI and EDSS")) |>
modify_table_styling(columns = label,
rows = label == "Time difference - MRI and EDSS",
footnote = "i.e. placebo") |>
add_overall()
#| label: sum_tab1
library(gtsummary)
dat |>
select(-ID) |>
tbl_summary(
by = Types.of.Medicines,
statistic = list(all_continuous() ~ "{median} ({p25},{p75})",
all_categorical() ~ "{n} ({p}%)"),
digits = all_continuous() ~ 2,
missing_text = "(Missing)",
label = c(Age ~ "Age, yrs - median (IQR)",
Age.of.onset ~ "Age onset, yrs - median (IQR)",
Does.the.time.difference.between.MRI.acquisition.and.EDSS...two.months ~ "Time difference < 2 months")) |>
modify_table_styling(rows = label == "Time difference < 2 months",
footnote = "Does the time difference between MRI acquisition and EDSS < two months") |>
add_overall()
#| label: load data
#| include: false
dat <- read.csv("/Users/paulsanfilippo/Dropbox/Alfred Neuroscience/zz_test_site/posts/011_03May_2024/Supplementary Table 1 for patient info .csv", header = T)
#| label: data
head(dat, 10)
#| label: sum_tab1
library(gtsummary)
dat |>
select(-ID) |>
tbl_summary(
by = Types.of.Medicines,
statistic = list(all_continuous() ~ "{median} ({p25},{p75})",
all_categorical() ~ "{n}/{N} ({p}%)"),
digits = all_continuous() ~ 1) |>
add_overall()
#| label: sum_tab1
library(gtsummary)
dat |>
select(-ID) |>
tbl_summary(
by = Types.of.Medicines,
statistic = list(all_continuous() ~ "{median} ({p25},{p75})",
all_categorical() ~ "{n} ({p}%)"),
digits = all_continuous() ~ 2,
missing_text = "(Missing)",
label = c(Age ~ "Age, yrs - median (IQR)",
Age.of.onset ~ "Age onset, yrs - median (IQR)",
Does.the.time.difference.between.MRI.acquisition.and.EDSS...two.months ~ "Time difference < 2 months")) |>
modify_table_styling(rows = label == "Time difference < 2 months",
footnote = "Does the time difference between MRI acquisition and EDSS < two months") |>
add_overall()
#| label: log_reg
mod <- glm(Sensory ~ Age.of.onset, family = 'binomial', data = dat)
summary(mod)
#| label: reg_tab1
mod |>
tbl(regression)
#| label: reg_tab1
mod |>
tbl_regression()
#| label: reg_tab1
mod |>
tbl_regression(exponentiate = T)
#| label: reg_tab1
mod |>
tbl_regression(exponentiate = T) |>
glance_source_note()
#| label: reg_tab1
mod |>
tbl_regression(exponentiate = T) |>
add_glance_source_note()
