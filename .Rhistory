c(
Stepwise_RMSE   = rmse_step,
ElasticNet_RMSE = rmse_enet
)
test <-  airpollution_dag |>
ggdag_paths(text = FALSE, use_labels = "label", stylized = TRUE, adjust_for = NULL,
directed = TRUE) +
theme_dag() +
expand_plot(expand_x = expansion(c(.5, .5))) +
ggplot2::scale_color_manual(values = c(backdoor = "red"))
knitr::opts_chunk$set(
echo = TRUE,
message = FALSE,
warning = FALSE
)
library(ggdag)
library(dagitty)
library(tidyverse)
library(ggrepel)
test <-  airpollution_dag |>
ggdag_paths(text = FALSE, use_labels = "label", stylized = TRUE, adjust_for = NULL,
directed = TRUE) +
theme_dag() +
expand_plot(expand_x = expansion(c(.5, .5))) +
ggplot2::scale_color_manual(values = c(backdoor = "red"))
airpollution_dag <- dagify(
pm25 ~ age,
mortality ~ age,
pm25 ~ ses,
smoking ~ ses,
healthcare ~ ses,
cvd ~ smoking,
mortality ~ smoking,
cvd ~ pm25,
mortality ~ cvd,
healthcare ~ cvd,
labels = c(
pm25 = "PM25",
mortality = "Mortality",
age = "Age",
ses = "SES",
smoking = "Smoking",
healthcare = "Healthcare",
cvd = "CVD"),
#coords = dag_coords,
exposure = "pm25",
outcome = "mortality")
test <-  airpollution_dag |>
ggdag_paths(text = FALSE, use_labels = "label", stylized = TRUE, adjust_for = NULL,
directed = TRUE) +
theme_dag() +
expand_plot(expand_x = expansion(c(.5, .5))) +
ggplot2::scale_color_manual(values = c(backdoor = "red"))
test
str(test)
test@data
test <-  airpollution_dag |>
ggdag_paths(text = FALSE, use_labels = "label", stylized = TRUE, adjust_for = NULL,
directed = F) +
theme_dag() +
expand_plot(expand_x = expansion(c(.5, .5))) +
ggplot2::scale_color_manual(values = c(backdoor = "red"))
test@data
test <-  airpollution_dag |>
ggdag_paths(text = FALSE, use_labels = "label", stylized = TRUE,
directed = F) +
theme_dag() +
expand_plot(expand_x = expansion(c(.5, .5))) +
ggplot2::scale_color_manual(values = c(backdoor = "red"))
test@data
test <-  airpollution_dag |>
ggdag_paths(text = FALSE, use_labels = "label", stylized = TRUE,
directed = F)
test@data
paths(airpollution_dag, directed = FALSE)
adjustmentSets(airpollution_dag, effect = "total")
adjustmentSets(airpollution_dag, exposure = "pm25", outcome = "mortality")
paths(airpollution_dag, directed = T)
paths(airpollution_dag, directed = F)
tidy(paths(airpollution_dag, directed = T))
tidyr::tidy(paths(airpollution_dag, directed = T))
test <-  paths(airpollution_dag, directed = T)
data.frame(test$paths)
test <-  paths(airpollution_dag, directed = F)
data.frame(test$paths)
data.frame(test$open)
cbind(data.frame(test$paths), data.frame(test$open))
extract_dag_paths <- function(dag) {
require(dagitty)
require(dplyr)
# Get all paths between exposure and outcome
all_paths <- paths(dag)
# Create dataframe
path_df <- data.frame(
path = all_paths$paths,
stringsAsFactors = FALSE
)
# Add open/closed status
path_df$status <- ifelse(all_paths$open, "open", "closed")
# Determine path type (frontdoor vs backdoor)
# Backdoor paths: start with arrow INTO exposure (exposure <- ...)
# Frontdoor paths: start with arrow OUT OF exposure (exposure -> ...)
path_df$type <- sapply(path_df$path, function(p) {
if (grepl("^\\S+ <-", p)) {
return("backdoor")
} else if (grepl("^\\S+ ->", p)) {
return("frontdoor")
} else {
return("unknown")
}
})
# Reorder columns for clarity
path_df <- path_df %>%
select(path, status, type)
return(path_df)
}
path_summary <- extract_dag_paths(airpollution_dag)
print(path_summary)
extract_dag_paths <- function(dag) {
require(dagitty)
require(dplyr)
# Get all paths between exposure and outcome
all_paths <- paths(dag)
# Create dataframe
path_df <- data.frame(
path = all_paths$paths,
stringsAsFactors = FALSE
)
# Add open/closed status
path_df$status <- ifelse(all_paths$open, "open", "closed")
# Determine path type
path_df$type <- sapply(path_df$path, function(p) {
# Check if path contains any <- arrows (backdoor indicator)
if (grepl("<-", p)) {
return("backdoor")
} else {
# All arrows point forward
return("frontdoor")
}
})
# Reorder columns for clarity
path_df <- path_df %>%
select(path, status, type)
return(path_df)
}
path_summary <- extract_dag_paths(airpollution_dag)
print(path_summary)
extract_dag_paths <- function(dag) {
require(dagitty)
require(dplyr)
# Get all paths between exposure and outcome
all_paths <- paths(dag)
# Create dataframe
path_df <- data.frame(
path = all_paths$paths,
stringsAsFactors = FALSE
)
# Add open/closed status
path_df$status <- ifelse(all_paths$open, "open", "closed")
# Determine path type
path_df$type <- sapply(path_df$path, function(p) {
# Check if path contains any <- arrows (backdoor indicator)
if (grepl("<-", p)) {
return("backdoor")
} else {
# All arrows point forward
return("frontdoor")
}
})
# Reorder columns for clarity
path_df <- path_df %>%
select(path, status, type)
return(path_df)
}
path_summary <- extract_dag_paths(airpollution_dag)
print(path_summary)
extract_dag_paths <- function(dag) {
require(dagitty)
require(dplyr)
require(purrr)
# Get all paths between exposure and outcome
all_paths <- paths(dag)
# Create dataframe
path_df <- data.frame(
path = all_paths$paths,
stringsAsFactors = FALSE
)
# Add open/closed status
path_df$status <- ifelse(all_paths$open, "open", "closed")
# Determine path type
path_df$type <- map(path_df$path, function(p) {
# Check if path contains any <- arrows (backdoor indicator)
if (grepl("<-", p)) {
return("backdoor")
} else {
# All arrows point forward
return("frontdoor")
}
})
# Reorder columns for clarity
path_df <- path_df %>%
select(path, status, type)
return(path_df)
}
path_summary <- extract_dag_paths(airpollution_dag)
print(path_summary)
extract_dag_paths <- function(dag) {
require(dagitty)
require(dplyr)
require(purrr)
# Get all paths between exposure and outcome
all_paths <- paths(dag)
# Create dataframe
path_df <- data.frame(
path = all_paths$paths,
stringsAsFactors = FALSE
)
# Add open/closed status
path_df$status <- ifelse(all_paths$open, "open", "closed")
# Determine path type
path_df$type <- map(path_df$path, function(p) {
# Check if path contains any <- arrows (backdoor indicator)
if (grepl("<-", p)) {
return("backdoor")
} else {
# All arrows point forward
return("frontdoor")
}
})
# Reorder columns for clarity
path_df <- path_df |>
select(path, status, type)
return(path_df)
}
path_summary <- extract_dag_paths(airpollution_dag)
print(path_summary)
extract_dag_paths <- function(dag) {
require(dagitty)
require(dplyr)
require(purrr)
# Get all paths between exposure and outcome
all_paths <- paths(dag)
# Create dataframe
path_df <- data.frame(
path = all_paths$paths,
stringsAsFactors = FALSE
)
# Add open/closed status
path_df$status <- ifelse(all_paths$open, "open", "closed")
# Determine path type
path_df$type <- map(path_df$path, function(p) {
# Check if path contains any <- arrows (backdoor indicator)
if (grepl("<-", p)) {
return("backdoor")
} else {
# All arrows point forward
return("frontdoor")
}
})
# Reorder columns for clarity
path_df <- path_df |>
select(path, status, type)
return(path_df)
}
path_summary <- extract_dag_paths(airpollution_dag)
print(path_summary)
extract_dag_paths <- function(dag) {
require(dagitty)
require(dplyr)
require(purrr)
# Get all paths between exposure and outcome
all_paths <- paths(dag)
# Create dataframe
path_df <- data.frame(
path = all_paths$paths,
stringsAsFactors = FALSE
)
# Add open/closed status
path_df$status <- ifelse(all_paths$open, "open", "closed")
# Determine path type
path_df$type <- map(path_df$path, function(p) {
# Check if path contains any <- arrows (backdoor indicator)
if (grepl("<-", p)) {
return("backdoor")
} else {
# All arrows point forward
return("frontdoor")
}
})
# Reorder columns for clarity
path_df <- path_df |>
select(path, status, type)
return(path_df)
}
path_summary <- extract_dag_paths(airpollution_dag)
print(path_summary)
extract_dag_paths <- function(dag) {
require(dagitty)
require(dplyr)
require(purrr)
# Get all paths between exposure and outcome
all_paths <- paths(dag)
# Create dataframe
path_df <- data.frame(
path = all_paths$paths,
stringsAsFactors = FALSE
)
# Add open/closed status
path_df$status <- ifelse(all_paths$open, "open", "closed")
# Determine path type
path_df$type <- map(path_df$path, function(p) {
# Check if path contains any <- arrows (backdoor indicator)
if (grepl("<-", p)) {
return("backdoor")
} else {
# All arrows point forward
return("frontdoor")
}
})
# Reorder columns for clarity
path_df <- path_df |>
select(path, status, type) |>
arrange(type, status)
return(path_df)
}
path_summary <- extract_dag_paths(airpollution_dag)
print(path_summary)
extract_dag_paths <- function(dag) {
require(dagitty)
require(dplyr)
require(purrr)
# Get all paths between exposure and outcome
all_paths <- paths(dag)
# Create dataframe
path_df <- data.frame(
path = all_paths$paths,
stringsAsFactors = FALSE
)
# Add open/closed status
path_df$status <- ifelse(all_paths$open, "open", "closed")
# Determine path type
path_df$type <- map(path_df$path, function(p) {
# Check if path contains any <- arrows (backdoor indicator)
if (grepl("<-", p)) {
return("backdoor")
} else {
# All arrows point forward
return("frontdoor")
}
})
# Reorder columns for clarity
path_df <- path_df |>
select(path, status, type) |>
arrange(-type, status)
return(path_df)
}
path_summary <- extract_dag_paths(airpollution_dag)
extract_dag_paths <- function(dag) {
require(dagitty)
require(dplyr)
require(purrr)
# Get all paths between exposure and outcome
all_paths <- paths(dag)
# Create dataframe
path_df <- data.frame(
path = all_paths$paths,
stringsAsFactors = FALSE
)
# Add open/closed status
path_df$status <- ifelse(all_paths$open, "open", "closed")
# Determine path type
path_df$type <- map(path_df$path, function(p) {
# Check if path contains any <- arrows (backdoor indicator)
if (grepl("<-", p)) {
return("backdoor")
} else {
# All arrows point forward
return("frontdoor")
}
})
# Reorder columns for clarity
path_df <- path_df |>
select(path, status, type) |>
arrange(-(type), status)
return(path_df)
}
path_summary <- extract_dag_paths(airpollution_dag)
extract_dag_paths <- function(dag) {
require(dagitty)
require(dplyr)
require(purrr)
# Get all paths between exposure and outcome
all_paths <- paths(dag)
# Create dataframe
path_df <- data.frame(
path = all_paths$paths,
stringsAsFactors = FALSE
)
# Add open/closed status
path_df$status <- ifelse(all_paths$open, "open", "closed")
# Determine path type
path_df$type <- map(path_df$path, function(p) {
# Check if path contains any <- arrows (backdoor indicator)
if (grepl("<-", p)) {
return("backdoor")
} else {
# All arrows point forward
return("frontdoor")
}
})
# Reorder columns for clarity
path_df <- path_df |>
select(path, status, type) |>
arrange(desc(type), status)
return(path_df)
}
path_summary <- extract_dag_paths(airpollution_dag)
print(path_summary)
extract_dag_paths <- function(dag) {
require(dagitty)
require(dplyr)
require(purrr)
# Get all paths between exposure and outcome
all_paths <- paths(dag)
# Create dataframe
path_df <- data.frame(
path = all_paths$paths,
stringsAsFactors = FALSE
)
# Add open/closed status
path_df$status <- ifelse(all_paths$open, "open", "closed")
# Determine path type
path_df$type <- map(path_df$path, function(p) {
# Check if path contains any <- arrows (backdoor indicator)
if (grepl("<-", p)) {
return("backdoor")
} else {
# All arrows point forward
return("frontdoor")
}
})
# Reorder columns for clarity
path_df <- path_df |>
select(path, status, type) |>
arrange(desc(type), desc(status))
return(path_df)
}
path_summary <- extract_dag_paths(airpollution_dag)
print(path_summary)
extract_dag_paths <- function(dag) {
require(dagitty)
require(dplyr)
require(purrr)
# Get all paths between exposure and outcome
all_paths <- paths(dag)
# Create dataframe
path_df <- data.frame(
path = all_paths$paths,
stringsAsFactors = FALSE
)
# Add open/closed status
path_df$status <- ifelse(all_paths$open, "open", "closed")
# Determine path type
path_df$type <- map(path_df$path, function(p) {
# Check if path contains any <- arrows (backdoor indicator)
if (grepl("<-", p)) {
return("backdoor")
} else {
# All arrows point forward
return("frontdoor")
}
})
# Reorder columns for clarity
path_df <- path_df |>
select(path, status, type) |>
arrange(desc(type), desc(status))
return(path_df)
}
path_summary <- extract_dag_paths(airpollution_dag)
kable(path_summary)
library(kableExtra)
extract_dag_paths <- function(dag) {
require(dagitty)
require(dplyr)
require(purrr)
# Get all paths between exposure and outcome
all_paths <- paths(dag)
# Create dataframe
path_df <- data.frame(
path = all_paths$paths,
stringsAsFactors = FALSE
)
# Add open/closed status
path_df$status <- ifelse(all_paths$open, "open", "closed")
# Determine path type
path_df$type <- map(path_df$path, function(p) {
# Check if path contains any <- arrows (backdoor indicator)
if (grepl("<-", p)) {
return("backdoor")
} else {
# All arrows point forward
return("frontdoor")
}
})
# Reorder columns for clarity
path_df <- path_df |>
select(path, status, type) |>
arrange(desc(type), desc(status))
return(path_df)
}
path_summary <- extract_dag_paths(airpollution_dag)
kable(path_summary)
