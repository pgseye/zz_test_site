<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-09-20">
<meta name="description" content="Confounding - how statistical adjustment relates to stratification.">

<title>Test Site 2 - Epi. 101 Lesson - Confounding</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Test Site 2</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">All Posts</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background"><span class="header-section-number">1</span> Background</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data"><span class="header-section-number">2</span> Data</a></li>
  <li><a href="#simple-epidemiological-approach" id="toc-simple-epidemiological-approach" class="nav-link" data-scroll-target="#simple-epidemiological-approach"><span class="header-section-number">3</span> Simple Epidemiological Approach</a>
  <ul>
  <li><a href="#sec-cor1" id="toc-sec-cor1" class="nav-link" data-scroll-target="#sec-cor1"><span class="header-section-number">3.1</span> Crude Odds Ratio - Exposure/Outcome</a></li>
  <li><a href="#sec-aor" id="toc-sec-aor" class="nav-link" data-scroll-target="#sec-aor"><span class="header-section-number">3.2</span> Adjusted Odds Ratios - Exposure/Outcome (via stratification)</a>
  <ul class="collapse">
  <li><a href="#sec-aor1" id="toc-sec-aor1" class="nav-link" data-scroll-target="#sec-aor1"><span class="header-section-number">3.2.1</span> Smokers</a></li>
  <li><a href="#sec-aor2" id="toc-sec-aor2" class="nav-link" data-scroll-target="#sec-aor2"><span class="header-section-number">3.2.2</span> Non-smokers</a></li>
  <li><a href="#salient-points" id="toc-salient-points" class="nav-link" data-scroll-target="#salient-points"><span class="header-section-number">3.2.3</span> Salient points</a></li>
  </ul></li>
  <li><a href="#sec-cor2" id="toc-sec-cor2" class="nav-link" data-scroll-target="#sec-cor2"><span class="header-section-number">3.3</span> Crude Odds Ratio - Confounder/Outcome</a></li>
  <li><a href="#sec-aor5" id="toc-sec-aor5" class="nav-link" data-scroll-target="#sec-aor5"><span class="header-section-number">3.4</span> Adjusted Odds Ratios - Confounder/Outcome (via stratification)</a>
  <ul class="collapse">
  <li><a href="#sec-aor3" id="toc-sec-aor3" class="nav-link" data-scroll-target="#sec-aor3"><span class="header-section-number">3.4.1</span> Coffee-drinkers</a></li>
  <li><a href="#sec-aor4" id="toc-sec-aor4" class="nav-link" data-scroll-target="#sec-aor4"><span class="header-section-number">3.4.2</span> Non-coffee-drinkers</a></li>
  <li><a href="#salient-points-1" id="toc-salient-points-1" class="nav-link" data-scroll-target="#salient-points-1"><span class="header-section-number">3.4.3</span> Salient points</a></li>
  </ul></li>
  <li><a href="#adjusted-odds-ratio---overall" id="toc-adjusted-odds-ratio---overall" class="nav-link" data-scroll-target="#adjusted-odds-ratio---overall"><span class="header-section-number">3.5</span> Adjusted Odds Ratio - Overall</a></li>
  </ul></li>
  <li><a href="#statistical-modelling-approach" id="toc-statistical-modelling-approach" class="nav-link" data-scroll-target="#statistical-modelling-approach"><span class="header-section-number">4</span> Statistical Modelling Approach</a>
  <ul>
  <li><a href="#crude-odds-ratio---exposureoutcome" id="toc-crude-odds-ratio---exposureoutcome" class="nav-link" data-scroll-target="#crude-odds-ratio---exposureoutcome"><span class="header-section-number">4.1</span> Crude Odds Ratio - Exposure/Outcome</a></li>
  <li><a href="#adjusted-odds-ratios---exposureoutcome-via-stratification" id="toc-adjusted-odds-ratios---exposureoutcome-via-stratification" class="nav-link" data-scroll-target="#adjusted-odds-ratios---exposureoutcome-via-stratification"><span class="header-section-number">4.2</span> Adjusted Odds Ratios - Exposure/Outcome (via stratification)</a>
  <ul class="collapse">
  <li><a href="#smokers" id="toc-smokers" class="nav-link" data-scroll-target="#smokers"><span class="header-section-number">4.2.1</span> Smokers</a></li>
  <li><a href="#non-smokers" id="toc-non-smokers" class="nav-link" data-scroll-target="#non-smokers"><span class="header-section-number">4.2.2</span> Non-smokers</a></li>
  </ul></li>
  <li><a href="#crude-odds-ratio---confounderoutcome" id="toc-crude-odds-ratio---confounderoutcome" class="nav-link" data-scroll-target="#crude-odds-ratio---confounderoutcome"><span class="header-section-number">4.3</span> Crude Odds Ratio - Confounder/Outcome</a></li>
  <li><a href="#adjusted-odds-ratios---confounderoutcome-via-stratification" id="toc-adjusted-odds-ratios---confounderoutcome-via-stratification" class="nav-link" data-scroll-target="#adjusted-odds-ratios---confounderoutcome-via-stratification"><span class="header-section-number">4.4</span> Adjusted Odds Ratios - Confounder/Outcome (via stratification)</a>
  <ul class="collapse">
  <li><a href="#coffee-drinkers" id="toc-coffee-drinkers" class="nav-link" data-scroll-target="#coffee-drinkers"><span class="header-section-number">4.4.1</span> Coffee-drinkers</a></li>
  <li><a href="#non-coffee-drinkers" id="toc-non-coffee-drinkers" class="nav-link" data-scroll-target="#non-coffee-drinkers"><span class="header-section-number">4.4.2</span> Non-coffee-drinkers</a></li>
  </ul></li>
  <li><a href="#adjusted-odds-ratio---overall-1" id="toc-adjusted-odds-ratio---overall-1" class="nav-link" data-scroll-target="#adjusted-odds-ratio---overall-1"><span class="header-section-number">4.5</span> Adjusted Odds Ratio - Overall</a></li>
  </ul></li>
  <li><a href="#some-guidelines" id="toc-some-guidelines" class="nav-link" data-scroll-target="#some-guidelines"><span class="header-section-number">5</span> Some Guidelines…</a>
  <ul>
  <li><a href="#no-confounding-or-effect-modification-present" id="toc-no-confounding-or-effect-modification-present" class="nav-link" data-scroll-target="#no-confounding-or-effect-modification-present"><span class="header-section-number">5.1</span> No Confounding or Effect Modification Present</a></li>
  <li><a href="#only-confounding-present" id="toc-only-confounding-present" class="nav-link" data-scroll-target="#only-confounding-present"><span class="header-section-number">5.2</span> Only Confounding Present</a></li>
  <li><a href="#confounding-andor-effect-modification-present" id="toc-confounding-andor-effect-modification-present" class="nav-link" data-scroll-target="#confounding-andor-effect-modification-present"><span class="header-section-number">5.3</span> Confounding and/or Effect Modification Present</a></li>
  </ul></li>
  <li><a href="#the-end" id="toc-the-end" class="nav-link" data-scroll-target="#the-end"><span class="header-section-number">6</span> The End!</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Epi. 101 Lesson - Confounding</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">analysis</div>
    <div class="quarto-category">code</div>
    <div class="quarto-category">concept</div>
    <div class="quarto-category">modelling</div>
  </div>
  </div>

<div>
  <div class="description">
    Confounding - how statistical adjustment relates to stratification.
  </div>
</div>


<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 20, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="background" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="background"><span class="header-section-number">1</span> Background</h2>
<p>I know I have touched on confounding before but it’s such an important concept in statistics that I thought I would dedicate a post to it today. There is so much one could talk about on the topic, but my aim is to provide you with some intuition as to what is actually happening when one variable ‘confuses’ the relationship between two others.</p>
<p>I’m going to use a fairly classic example from epidemiology that examines whether there is an association between drinking coffee (full-cream milk only thanks) and developing coronary heart disease (CHD).</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In a sense this is a causal question - i.e.&nbsp;“Does drinking coffee <em>cause</em> CHD?”, but for the sake of the illustration, let’s excuse ourselves from such a question’s fairly strict assumptions for the time being.</p>
</div>
</div>
<p>Being the good researchers that we are, we give considerable thought as to <em>how</em> to answer our question. That means we don’t forgo our own field-expertise and knowledge at the expense of the data-driven p-value gods. First and foremost, we think about the relationships we are investigating and <em>all</em> the potential factors that could influence those relationships. And that comes from theory, not statistical tests.</p>
<p>In examining those knowledge-driven theoretical relationships, we draw a <strong>Directed Acyclic Graph (DAG)</strong>. This is a topic in its own right, but for another post - in the meantime some good primers can be found <a href="https://onlinelibrary.wiley.com/doi/10.1111/resp.12238">here</a> and <a href="https://health.ucdavis.edu/media-resources/ctsc/documents/pdfs/directed-acyclic-graphs20220209.pdf">here</a>. A DAG is otherwise more simply known as a causal diagram. It is meant to provide a visual representation of the causal relationships among a set of variables and in doing this forces the researcher to think about their scientific question in a more holistic manner. Indeed, statistical tests aren’t even involved at this point.</p>
<p>So, in thinking about our coffee-CHD question, it occurs to us that smoking is known to cause CHD and we wonder whether smoking might also be related to drinking coffee - i.e.&nbsp;do coffee-drinkers also smoke more (or less) than people who prefer don’t drink coffee (tea perhaps?). In this case, a simple DAG might look something like:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/coffee_dag.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
<p>What this DAG helps to summarise is what we are now wondering - is smoking confusing or distorting the association between coffee drinking and the development of CHD? In other words, is smoking a <strong>confounder</strong> in the association between our <strong>exposure</strong> (coffee-drinking) and <strong>outcome</strong> (CHD) variables of interest?</p>
<p>Before we take a peek at our data, let’s refresh our memories regarding the three conditions a variable must fulfil to be considered a putative confounder:</p>
<ol type="1">
<li>The variable must be associated with <strong>both</strong> the exposure and the outcome.</li>
<li>The variable must be distributed <strong>unequally</strong> across the exposure (e.g.&nbsp;between treatment groups).</li>
<li>The variable must <strong>not</strong> lie on the causal pathway between the exposure and the outcome (this would be a mediator and requires different treatment).</li>
</ol>
</section>
<section id="data" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="data"><span class="header-section-number">2</span> Data</h2>
<p>Ok, let’s now take a look at the hypothetical retrospective case-control data we’ll be using today. It consists of <code>40</code> observations and three variables:</p>
<ul>
<li><p><code>outcome</code> - did the individual have CHD (case) or not (control).</p></li>
<li><p><code>coffee-drinker</code> - was the individual a coffee-drinker or not. This is our exposure variable of interest.</p></li>
<li><p><code>smoker</code> - was the individual a smoker or not. This is our potential confounder.</p></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(ggmosaic)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co"># Hypothetical data</span></span>
<span id="cb1-8"><a href="#cb1-8"></a>y <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">20</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">20</span>)), <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"control"</span>, <span class="st">"case"</span>))</span>
<span id="cb1-9"><a href="#cb1-9"></a>x1 <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">10</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">10</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">15</span>)), <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"no"</span>, <span class="st">"yes"</span>))</span>
<span id="cb1-10"><a href="#cb1-10"></a>x2 <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">9</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">7</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">2</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">14</span>)), <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"no"</span>, <span class="st">"yes"</span>))</span>
<span id="cb1-11"><a href="#cb1-11"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"outcome"</span> <span class="ot">=</span> y, <span class="st">"coffee_drinker"</span> <span class="ot">=</span> x1, <span class="st">"smoker"</span> <span class="ot">=</span> x2)</span>
<span id="cb1-12"><a href="#cb1-12"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb1-13"><a href="#cb1-13"></a>  <span class="fu">kable</span>(<span class="at">align =</span> <span class="st">"c"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: center;">outcome</th>
<th style="text-align: center;">coffee_drinker</th>
<th style="text-align: center;">smoker</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">case</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">yes</td>
</tr>
<tr class="even">
<td style="text-align: center;">case</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">yes</td>
</tr>
<tr class="odd">
<td style="text-align: center;">case</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">yes</td>
</tr>
<tr class="even">
<td style="text-align: center;">case</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">yes</td>
</tr>
<tr class="odd">
<td style="text-align: center;">case</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">yes</td>
</tr>
<tr class="even">
<td style="text-align: center;">case</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">yes</td>
</tr>
<tr class="odd">
<td style="text-align: center;">case</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">yes</td>
</tr>
<tr class="even">
<td style="text-align: center;">case</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">yes</td>
</tr>
<tr class="odd">
<td style="text-align: center;">case</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">yes</td>
</tr>
<tr class="even">
<td style="text-align: center;">case</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="odd">
<td style="text-align: center;">case</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">yes</td>
</tr>
<tr class="even">
<td style="text-align: center;">case</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">yes</td>
</tr>
<tr class="odd">
<td style="text-align: center;">case</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">yes</td>
</tr>
<tr class="even">
<td style="text-align: center;">case</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="odd">
<td style="text-align: center;">case</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="even">
<td style="text-align: center;">case</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="odd">
<td style="text-align: center;">case</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="even">
<td style="text-align: center;">case</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="odd">
<td style="text-align: center;">case</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="even">
<td style="text-align: center;">case</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="odd">
<td style="text-align: center;">control</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">yes</td>
</tr>
<tr class="even">
<td style="text-align: center;">control</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">yes</td>
</tr>
<tr class="odd">
<td style="text-align: center;">control</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">yes</td>
</tr>
<tr class="even">
<td style="text-align: center;">control</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="odd">
<td style="text-align: center;">control</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="even">
<td style="text-align: center;">control</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">yes</td>
</tr>
<tr class="odd">
<td style="text-align: center;">control</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="even">
<td style="text-align: center;">control</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="odd">
<td style="text-align: center;">control</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="even">
<td style="text-align: center;">control</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="odd">
<td style="text-align: center;">control</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="even">
<td style="text-align: center;">control</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="odd">
<td style="text-align: center;">control</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="even">
<td style="text-align: center;">control</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="odd">
<td style="text-align: center;">control</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="even">
<td style="text-align: center;">control</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="odd">
<td style="text-align: center;">control</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="even">
<td style="text-align: center;">control</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="odd">
<td style="text-align: center;">control</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
<tr class="even">
<td style="text-align: center;">control</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">no</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="simple-epidemiological-approach" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="simple-epidemiological-approach"><span class="header-section-number">3</span> Simple Epidemiological Approach</h2>
<p>Given the binary nature of all three variables we can explore the relationships nicely using a basic workhorse of epidemiological analysis - the <strong>2x2 contingency table</strong>. In its simplest form this shows the frequency cross-tabulation of the exposure with the outcome. However, I think it’s also useful to display the <strong>conditional row percentages</strong> - in other words, the proportions (probabilities) of each outcome (categories as columns) <strong>given</strong> a particular exposure (categories as rows). In this way it is easy to eyeball whether the exposure is associated with the outcome without doing any specific test simply by looking at whether the row percentages vary greatly. As a good visual accompaniment for each cross-tabulation, I am also going to generate mosaic plots. These can give you an impression of potential associations without using any actual numbers.</p>
<section id="sec-cor1" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="sec-cor1"><span class="header-section-number">3.1</span> Crude Odds Ratio - Exposure/Outcome</h3>
<p>The following cross-tabulation and mosaic plot show the potential association between coffee-drinking and CHD. If we look at the proportions of people with CHD in each exposure group we can see that these do in fact differ - <code>67%</code> of coffee drinkers develop CHD, compared to <code>40%</code> of non-coffee drinkers. That is a telling sign of an association before we even do anything. The mosaic plot mirrors these numbers graphically.</p>
<div class="column" style="width:45%;">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>tab <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="fu">tabyl</span>(coffee_drinker, outcome) <span class="sc">|&gt;</span> </span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="fu">adorn_totals</span>(<span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"row"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">rounding =</span> <span class="st">"half up"</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb2-6"><a href="#cb2-6"></a>  <span class="fu">adorn_ns</span>() <span class="sc">|&gt;</span> </span>
<span id="cb2-7"><a href="#cb2-7"></a>  <span class="fu">adorn_title</span>(<span class="st">"combined"</span>)</span>
<span id="cb2-8"><a href="#cb2-8"></a>tab[<span class="dv">1</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb2-9"><a href="#cb2-9"></a>tab[<span class="dv">1</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb2-10"><a href="#cb2-10"></a>tab[<span class="dv">2</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb2-11"><a href="#cb2-11"></a>tab[<span class="dv">2</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb2-12"><a href="#cb2-12"></a>tab <span class="sc">|&gt;</span> </span>
<span id="cb2-13"><a href="#cb2-13"></a>  <span class="fu">kable</span>(<span class="st">"html"</span>, <span class="at">escape =</span> F) <span class="sc">|&gt;</span> </span>
<span id="cb2-14"><a href="#cb2-14"></a>  <span class="fu">kable_paper</span>(<span class="at">bootstrap_options =</span> <span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> coffee_drinker/outcome </th>
   <th style="text-align:left;"> control </th>
   <th style="text-align:left;"> case </th>
   <th style="text-align:left;"> Total </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> no </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">60% (15)</span> </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">40% (10)</span> </td>
   <td style="text-align:left;"> 100% (25) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> yes </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">33%  (5)</span> </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">67% (10)</span> </td>
   <td style="text-align:left;"> 100% (15) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Total </td>
   <td style="text-align:left;"> 50% (20) </td>
   <td style="text-align:left;"> 50% (20) </td>
   <td style="text-align:left;"> 100% (40) </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="column" style="width:8%;">

</div>
<div class="column" style="width:45%;">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>df2 <span class="ot">&lt;-</span> df</span>
<span id="cb3-2"><a href="#cb3-2"></a>df2<span class="sc">$</span>coffee_drinker <span class="ot">&lt;-</span> <span class="fu">relevel</span>(df2<span class="sc">$</span>coffee_drinker, <span class="at">ref =</span> <span class="st">"yes"</span>)</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df2) <span class="sc">+</span></span>
<span id="cb3-4"><a href="#cb3-4"></a> <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(outcome, coffee_drinker), <span class="at">fill =</span> coffee_drinker)) <span class="sc">+</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">40</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="1152"></p>
</figure>
</div>
</div>
</div>
</div>
<p>Working out the odds ratio (OR) from a 2x2 contingency table is trivial. We want to divide the odds of having CHD given being a coffee-drinker by the odds of having CHD given being a non-coffee-drinker. That is:</p>
<p><span class="math display">\[\text{OR} = \frac{\text{10/5}}{10/15}\]</span></p>
<p>Or equivalently:</p>
<p><span class="math display">\[\text{OR} = \frac{\text{10 x 15}}{\text{5 x 10}} = 3\]</span> The OR is <code>3</code> which indicates a <code>3-fold</code> increase in the odds of CHD among coffee-drinkers compared to their non-coffee-drinking peers. We consider this a <strong>crude</strong> or <strong>unadjusted</strong> effect estimate.</p>
</section>
<section id="sec-aor" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="sec-aor"><span class="header-section-number">3.2</span> Adjusted Odds Ratios - Exposure/Outcome (via stratification)</h3>
<p>To this point we haven’t even considered any potential confounding effect of smoking. So how could we incorporate that into the current analysis using 2x2 contingency tables? It’s actually very easy - we just stratify on smoking and generate two contingency tables - one for the association between coffee drinking and CHD in smokers and one for the association between coffee drinking and CHD in non-smokers. It then follows that <strong>within each stratum of smoking the effect of smoking is ‘held constant’ and therefore cannot confound the association between coffee drinking and CHD.</strong> In other words, this becomes an <strong>adjusted</strong> ‘effect’ of coffee drinking on CHD and is equivalent to ‘controlling’ for smoking in a multivariable statistical model (which I will demonstrate shortly).</p>
<section id="sec-aor1" class="level4" data-number="3.2.1">
<h4 data-number="3.2.1" class="anchored" data-anchor-id="sec-aor1"><span class="header-section-number">3.2.1</span> Smokers</h4>
<p>So, the cross-tabulation for the association between coffee-drinking and CHD <strong>in smokers</strong>, becomes:</p>
<div class="column" style="width:45%;">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>tab <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="fu">filter</span>(smoker <span class="sc">==</span> <span class="st">"yes"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="fu">tabyl</span>(coffee_drinker, outcome) <span class="sc">|&gt;</span> </span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span class="fu">adorn_totals</span>(<span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb4-5"><a href="#cb4-5"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"row"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">rounding =</span> <span class="st">"half up"</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-7"><a href="#cb4-7"></a>  <span class="fu">adorn_ns</span>() <span class="sc">|&gt;</span> </span>
<span id="cb4-8"><a href="#cb4-8"></a>  <span class="fu">adorn_title</span>(<span class="st">"combined"</span>)</span>
<span id="cb4-9"><a href="#cb4-9"></a>tab[<span class="dv">1</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb4-10"><a href="#cb4-10"></a>tab[<span class="dv">1</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb4-11"><a href="#cb4-11"></a>tab[<span class="dv">2</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb4-12"><a href="#cb4-12"></a>tab[<span class="dv">2</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb4-13"><a href="#cb4-13"></a>tab <span class="sc">|&gt;</span> </span>
<span id="cb4-14"><a href="#cb4-14"></a>  <span class="fu">kable</span>(<span class="st">"html"</span>, <span class="at">escape =</span> F) <span class="sc">|&gt;</span> </span>
<span id="cb4-15"><a href="#cb4-15"></a>  <span class="fu">kable_paper</span>(<span class="at">bootstrap_options =</span> <span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> coffee_drinker/outcome </th>
   <th style="text-align:left;"> control </th>
   <th style="text-align:left;"> case </th>
   <th style="text-align:left;"> Total </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> no </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">25% (1)</span> </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">75%  (3)</span> </td>
   <td style="text-align:left;"> 100%  (4) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> yes </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">25% (3)</span> </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">75%  (9)</span> </td>
   <td style="text-align:left;"> 100% (12) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Total </td>
   <td style="text-align:left;"> 25% (4) </td>
   <td style="text-align:left;"> 75% (12) </td>
   <td style="text-align:left;"> 100% (16) </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="column" style="width:8%;">

</div>
<div class="column" style="width:45%;">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>df2 <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">filter</span>(smoker <span class="sc">==</span> <span class="st">"yes"</span>)</span>
<span id="cb5-3"><a href="#cb5-3"></a>df2<span class="sc">$</span>coffee_drinker <span class="ot">&lt;-</span> <span class="fu">relevel</span>(df2<span class="sc">$</span>coffee_drinker, <span class="at">ref =</span> <span class="st">"yes"</span>)</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df2) <span class="sc">+</span></span>
<span id="cb5-5"><a href="#cb5-5"></a> <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(outcome, coffee_drinker), <span class="at">fill =</span> coffee_drinker)) <span class="sc">+</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">40</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="1152"></p>
</figure>
</div>
</div>
</div>
</div>
<p>Note how this time the (conditional row) proportions of people with CHD in each exposure group are more similar (in this contrived example they are the same) - in this subgroup of smokers it doesn’t matter whether you’re a coffee drinker or not - <code>75%</code> of people have CHD.</p>
<p>Now, the OR is calculated as:</p>
<p><span class="math display">\[\text{OR} = \frac{\text{9 x 1}}{\text{3 x 3}} = 1\]</span></p>
<p>The OR is <code>1</code> - in other words there is no longer any association between coffee drinking and CHD. We consider this an <strong>adjusted</strong> OR as we have removed any potential confounding effect of smoking by holding it at a constant value (i.e.&nbsp;everyone is a smoker).</p>
</section>
<section id="sec-aor2" class="level4" data-number="3.2.2">
<h4 data-number="3.2.2" class="anchored" data-anchor-id="sec-aor2"><span class="header-section-number">3.2.2</span> Non-smokers</h4>
<p>Now let’s consider the non-smokers. The cross-tabulation for the association between coffee-drinking and CHD <strong>in non-smokers</strong> is:</p>
<div class="column" style="width:45%;">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>tab <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="fu">filter</span>(smoker <span class="sc">==</span> <span class="st">"no"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="fu">tabyl</span>(coffee_drinker, outcome) <span class="sc">|&gt;</span> </span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="fu">adorn_totals</span>(<span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb6-5"><a href="#cb6-5"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"row"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb6-6"><a href="#cb6-6"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">rounding =</span> <span class="st">"half up"</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb6-7"><a href="#cb6-7"></a>  <span class="fu">adorn_ns</span>() <span class="sc">|&gt;</span> </span>
<span id="cb6-8"><a href="#cb6-8"></a>  <span class="fu">adorn_title</span>(<span class="st">"combined"</span>)</span>
<span id="cb6-9"><a href="#cb6-9"></a>tab[<span class="dv">1</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb6-10"><a href="#cb6-10"></a>tab[<span class="dv">1</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb6-11"><a href="#cb6-11"></a>tab[<span class="dv">2</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb6-12"><a href="#cb6-12"></a>tab[<span class="dv">2</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb6-13"><a href="#cb6-13"></a>tab <span class="sc">|&gt;</span> </span>
<span id="cb6-14"><a href="#cb6-14"></a>  <span class="fu">kable</span>(<span class="st">"html"</span>, <span class="at">escape =</span> F) <span class="sc">|&gt;</span> </span>
<span id="cb6-15"><a href="#cb6-15"></a>  <span class="fu">kable_paper</span>(<span class="at">bootstrap_options =</span> <span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> coffee_drinker/outcome </th>
   <th style="text-align:left;"> control </th>
   <th style="text-align:left;"> case </th>
   <th style="text-align:left;"> Total </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> no </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">67% (14)</span> </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">33% (7)</span> </td>
   <td style="text-align:left;"> 100% (21) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> yes </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">67%  (2)</span> </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">33% (1)</span> </td>
   <td style="text-align:left;"> 100%  (3) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Total </td>
   <td style="text-align:left;"> 67% (16) </td>
   <td style="text-align:left;"> 33% (8) </td>
   <td style="text-align:left;"> 100% (24) </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="column" style="width:8%;">

</div>
<div class="column" style="width:45%;">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>df2 <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="fu">filter</span>(smoker <span class="sc">==</span> <span class="st">"no"</span>)</span>
<span id="cb7-3"><a href="#cb7-3"></a>df2<span class="sc">$</span>coffee_drinker <span class="ot">&lt;-</span> <span class="fu">relevel</span>(df2<span class="sc">$</span>coffee_drinker, <span class="at">ref =</span> <span class="st">"yes"</span>)</span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df2) <span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5"></a> <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(outcome, coffee_drinker), <span class="at">fill =</span> coffee_drinker)) <span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb7-8"><a href="#cb7-8"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">40</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="1152"></p>
</figure>
</div>
</div>
</div>
</div>
<p>Do you see a pattern here? Again, the conditional row percentages are the same across exposure groups (<code>33%</code>) - so, in this subgroup of non-smokers it also doesn’t matter whether you are a coffee drnker or not, the proportions of CHD are the same.</p>
<p>The OR this time is:</p>
<p><span class="math display">\[\text{OR} = \frac{\text{1 x 14}}{\text{7 x 2}} = 1\]</span></p>
<p>The <strong>adjusted</strong> OR is again <code>1</code> - that is, there is no association between coffee drinking and CHD when we remove any potential confounding effect of smoking by holding it at a (different) constant value (i.e.&nbsp;everyone is a non-smoker).</p>
</section>
<section id="salient-points" class="level4" data-number="3.2.3">
<h4 data-number="3.2.3" class="anchored" data-anchor-id="salient-points"><span class="header-section-number">3.2.3</span> Salient points</h4>
<p>There are two important points to make in the comparison of the crude and adjusted estimates:</p>
<ol type="1">
<li>The adjusted OR is not equal to the crude OR - this suggests confounding is present.</li>
<li>Furthermore, this represents a special case in which there is <em>complete</em> confounding - the OR reduces to the null value (i.e.&nbsp;<code>1</code>). I will expand on these points in a moment.</li>
</ol>
</section>
</section>
<section id="sec-cor2" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="sec-cor2"><span class="header-section-number">3.3</span> Crude Odds Ratio - Confounder/Outcome</h3>
<p>To further illuminate the above ideas let’s repeat the analyses but this time ‘switch’ the exposure and confounder around (hopefully it will become clear why we are doing this as you continue reading). The cross-tabulation and mosaic plot suggest an association between smoking and CHD - <code>75%</code> of smokers develop CHD, compared to <code>33%</code> of non-smokers.</p>
<div class="column" style="width:45%;">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>tab <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="fu">tabyl</span>(smoker, outcome) <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="fu">adorn_totals</span>(<span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"row"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">rounding =</span> <span class="st">"half up"</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="fu">adorn_ns</span>() <span class="sc">|&gt;</span> </span>
<span id="cb8-7"><a href="#cb8-7"></a>  <span class="fu">adorn_title</span>(<span class="st">"combined"</span>)</span>
<span id="cb8-8"><a href="#cb8-8"></a>tab[<span class="dv">1</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb8-9"><a href="#cb8-9"></a>tab[<span class="dv">1</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb8-10"><a href="#cb8-10"></a>tab[<span class="dv">2</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb8-11"><a href="#cb8-11"></a>tab[<span class="dv">2</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb8-12"><a href="#cb8-12"></a>tab <span class="sc">|&gt;</span> </span>
<span id="cb8-13"><a href="#cb8-13"></a>  <span class="fu">kable</span>(<span class="st">"html"</span>, <span class="at">escape =</span> F) <span class="sc">|&gt;</span> </span>
<span id="cb8-14"><a href="#cb8-14"></a>  <span class="fu">kable_paper</span>(<span class="at">bootstrap_options =</span> <span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> smoker/outcome </th>
   <th style="text-align:left;"> control </th>
   <th style="text-align:left;"> case </th>
   <th style="text-align:left;"> Total </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> no </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">67% (16)</span> </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">33%  (8)</span> </td>
   <td style="text-align:left;"> 100% (24) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> yes </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">25%  (4)</span> </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">75% (12)</span> </td>
   <td style="text-align:left;"> 100% (16) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Total </td>
   <td style="text-align:left;"> 50% (20) </td>
   <td style="text-align:left;"> 50% (20) </td>
   <td style="text-align:left;"> 100% (40) </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="column" style="width:8%;">

</div>
<div class="column" style="width:45%;">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>df2 <span class="ot">&lt;-</span> df</span>
<span id="cb9-2"><a href="#cb9-2"></a>df2<span class="sc">$</span>smoker <span class="ot">&lt;-</span> <span class="fu">relevel</span>(df2<span class="sc">$</span>smoker, <span class="at">ref =</span> <span class="st">"yes"</span>)</span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df2) <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4"></a> <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(outcome, smoker), <span class="at">fill =</span> smoker)) <span class="sc">+</span></span>
<span id="cb9-5"><a href="#cb9-5"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb9-7"><a href="#cb9-7"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">40</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="1152"></p>
</figure>
</div>
</div>
</div>
</div>
<p>The OR for the association between smoking and CHD is:</p>
<p><span class="math display">\[\text{OR} = \frac{\text{12 x 16}}{\text{8 x 4}} = 6\]</span></p>
<p>So the crude OR is <code>6</code>, which indicates a <code>6-fold</code> increase in the odds of CHD in smokers compared to non-smokers (ignoring coffee-drinking status).</p>
</section>
<section id="sec-aor5" class="level3" data-number="3.4">
<h3 data-number="3.4" class="anchored" data-anchor-id="sec-aor5"><span class="header-section-number">3.4</span> Adjusted Odds Ratios - Confounder/Outcome (via stratification)</h3>
<p>Let us know compare the adjusted ‘effects’ in coffee-drinkers compared to non-coffee-drinkers.</p>
<section id="sec-aor3" class="level4" data-number="3.4.1">
<h4 data-number="3.4.1" class="anchored" data-anchor-id="sec-aor3"><span class="header-section-number">3.4.1</span> Coffee-drinkers</h4>
<p>So, the cross-tabulation for the association between coffee-smoking and CHD <strong>in coffee-drinkers</strong>, becomes:</p>
<div class="column" style="width:45%;">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>tab <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="fu">filter</span>(coffee_drinker <span class="sc">==</span> <span class="st">"yes"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="fu">tabyl</span>(smoker, outcome) <span class="sc">|&gt;</span> </span>
<span id="cb10-4"><a href="#cb10-4"></a>  <span class="fu">adorn_totals</span>(<span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb10-5"><a href="#cb10-5"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"row"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-6"><a href="#cb10-6"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">rounding =</span> <span class="st">"half up"</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-7"><a href="#cb10-7"></a>  <span class="fu">adorn_ns</span>() <span class="sc">|&gt;</span> </span>
<span id="cb10-8"><a href="#cb10-8"></a>  <span class="fu">adorn_title</span>(<span class="st">"combined"</span>)</span>
<span id="cb10-9"><a href="#cb10-9"></a>tab[<span class="dv">1</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb10-10"><a href="#cb10-10"></a>tab[<span class="dv">1</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb10-11"><a href="#cb10-11"></a>tab[<span class="dv">2</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb10-12"><a href="#cb10-12"></a>tab[<span class="dv">2</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb10-13"><a href="#cb10-13"></a>tab <span class="sc">|&gt;</span> </span>
<span id="cb10-14"><a href="#cb10-14"></a>  <span class="fu">kable</span>(<span class="st">"html"</span>, <span class="at">escape =</span> F) <span class="sc">|&gt;</span> </span>
<span id="cb10-15"><a href="#cb10-15"></a>  <span class="fu">kable_paper</span>(<span class="at">bootstrap_options =</span> <span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> smoker/outcome </th>
   <th style="text-align:left;"> control </th>
   <th style="text-align:left;"> case </th>
   <th style="text-align:left;"> Total </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> no </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">67% (2)</span> </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">33%  (1)</span> </td>
   <td style="text-align:left;"> 100%  (3) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> yes </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">25% (3)</span> </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">75%  (9)</span> </td>
   <td style="text-align:left;"> 100% (12) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Total </td>
   <td style="text-align:left;"> 33% (5) </td>
   <td style="text-align:left;"> 67% (10) </td>
   <td style="text-align:left;"> 100% (15) </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="column" style="width:8%;">

</div>
<div class="column" style="width:45%;">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>df2 <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">filter</span>(coffee_drinker <span class="sc">==</span> <span class="st">"yes"</span>)</span>
<span id="cb11-3"><a href="#cb11-3"></a>df2<span class="sc">$</span>smoker <span class="ot">&lt;-</span> <span class="fu">relevel</span>(df2<span class="sc">$</span>smoker, <span class="at">ref =</span> <span class="st">"yes"</span>)</span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df2) <span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5"></a> <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(outcome, smoker), <span class="at">fill =</span> smoker)) <span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">40</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="1152"></p>
</figure>
</div>
</div>
</div>
</div>
<p>And the adjusted OR is:</p>
<p><span class="math display">\[\text{OR} = \frac{\text{9 x 2}}{\text{1 x 3}} = 6\]</span></p>
<p>The OR is <code>6</code> - in other words the same as the crude estimate.</p>
</section>
<section id="sec-aor4" class="level4" data-number="3.4.2">
<h4 data-number="3.4.2" class="anchored" data-anchor-id="sec-aor4"><span class="header-section-number">3.4.2</span> Non-coffee-drinkers</h4>
<p>Now let’s consider the non-coffee-drinkers. The cross-tabulation for the association between smokers and CHD <strong>in non-coffee-drinkers</strong> is:</p>
<div class="column" style="width:45%;">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>tab <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="fu">filter</span>(coffee_drinker <span class="sc">==</span> <span class="st">"no"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="fu">tabyl</span>(smoker, outcome) <span class="sc">|&gt;</span> </span>
<span id="cb12-4"><a href="#cb12-4"></a>  <span class="fu">adorn_totals</span>(<span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb12-5"><a href="#cb12-5"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"row"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb12-6"><a href="#cb12-6"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">rounding =</span> <span class="st">"half up"</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb12-7"><a href="#cb12-7"></a>  <span class="fu">adorn_ns</span>() <span class="sc">|&gt;</span> </span>
<span id="cb12-8"><a href="#cb12-8"></a>  <span class="fu">adorn_title</span>(<span class="st">"combined"</span>)</span>
<span id="cb12-9"><a href="#cb12-9"></a>tab[<span class="dv">1</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb12-10"><a href="#cb12-10"></a>tab[<span class="dv">1</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb12-11"><a href="#cb12-11"></a>tab[<span class="dv">2</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb12-12"><a href="#cb12-12"></a>tab[<span class="dv">2</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb12-13"><a href="#cb12-13"></a>tab <span class="sc">|&gt;</span> </span>
<span id="cb12-14"><a href="#cb12-14"></a>  <span class="fu">kable</span>(<span class="st">"html"</span>, <span class="at">escape =</span> F) <span class="sc">|&gt;</span> </span>
<span id="cb12-15"><a href="#cb12-15"></a>  <span class="fu">kable_paper</span>(<span class="at">bootstrap_options =</span> <span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> smoker/outcome </th>
   <th style="text-align:left;"> control </th>
   <th style="text-align:left;"> case </th>
   <th style="text-align:left;"> Total </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> no </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">67% (14)</span> </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">33%  (7)</span> </td>
   <td style="text-align:left;"> 100% (21) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> yes </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">25%  (1)</span> </td>
   <td style="text-align:left;"> <span style=" font-weight: bold;    ">75%  (3)</span> </td>
   <td style="text-align:left;"> 100%  (4) </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Total </td>
   <td style="text-align:left;"> 60% (15) </td>
   <td style="text-align:left;"> 40% (10) </td>
   <td style="text-align:left;"> 100% (25) </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="column" style="width:8%;">

</div>
<div class="column" style="width:45%;">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>df2 <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">filter</span>(coffee_drinker <span class="sc">==</span> <span class="st">"no"</span>)</span>
<span id="cb13-3"><a href="#cb13-3"></a>df2<span class="sc">$</span>smoker <span class="ot">&lt;-</span> <span class="fu">relevel</span>(df2<span class="sc">$</span>smoker, <span class="at">ref =</span> <span class="st">"yes"</span>)</span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df2) <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5"></a> <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(outcome, smoker), <span class="at">fill =</span> smoker)) <span class="sc">+</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">40</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="1152"></p>
</figure>
</div>
</div>
</div>
</div>
<p>And the adjusted OR is:</p>
<p><span class="math display">\[\text{OR} = \frac{\text{3 x 14}}{\text{7 x 1}} = 6\]</span></p>
<p>The OR is again <code>6</code>! Is this starting to make some sense?</p>
</section>
<section id="salient-points-1" class="level4" data-number="3.4.3">
<h4 data-number="3.4.3" class="anchored" data-anchor-id="salient-points-1"><span class="header-section-number">3.4.3</span> Salient points</h4>
<p>Again, there are two important points to make in the comparison of these crude and adjusted estimates:</p>
<ol type="1">
<li>It doesn’t seem to matter whether we adjust for coffee-drinking or not, the association between smoking and CHD remains the same.</li>
<li>It then follows that coffee-drinking is not a confounder in the smoking-CHD relationship.</li>
</ol>
</section>
</section>
<section id="adjusted-odds-ratio---overall" class="level3" data-number="3.5">
<h3 data-number="3.5" class="anchored" data-anchor-id="adjusted-odds-ratio---overall"><span class="header-section-number">3.5</span> Adjusted Odds Ratio - Overall</h3>
<p>It just so happens that the adjusted OR’s from <a href="#sec-aor" class="quarto-xref">Section&nbsp;3.2</a> are the same in each subgroup, but this is an exception rather than a rule. Normally, in the presence of confounding, effect estimates will differ in each subgroup to the crude estimate but will <strong>not</strong> be equal to each other. What do we do with separate effect estimates from each subgroup - this makes reporting somewhat painful, surely? Well, if the adjusted estimates aren’t too different from each other, they can be combined in a weighted manner to provide an overall summary estimate and this can be done using the <a href="https://en.wikipedia.org/wiki/Cochran–Mantel–Haenszel_statistics">Cochran-Mantel-Haenszel</a> (CMH) test. I won’t illustrate this here as in the modern computing age there is really no need to be crunching this statistic anymore, and we use a statistical model instead.</p>
<p>As I alluded to above, we should only attempt to combine individual estimates when they are ‘similar’. But what does that mean? How similar <em>should</em> they be and how different <em>can</em> they be? There are no hard and fast rules but I will outline a couple of guidelines at the end of this post. The important thing is to realise that when individual estimates are different, this actually represents an <strong>effect modification/interaction</strong> effect - that is the strength of the association between the exposure and the outcome <em>depends</em> on the level of the third variable. Interaction effects are of interest (scientifically and clinically) and we shouldn’t try to cancel them out by averaging over them.</p>
</section>
</section>
<section id="statistical-modelling-approach" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="statistical-modelling-approach"><span class="header-section-number">4</span> Statistical Modelling Approach</h2>
<p>The cross-tabulation approach is great for expository purposes but is limiting in the types of relationships you can practically explore - things just become unwieldy with variables that contain more than two categories and impossible with continuous variables.</p>
<p>So, we tend to use statistical models instead. These make confounder control/adjustment easy - we just need to include the potential confounder in the model along with our exposure of interest. Let’s now replicate everything we have done thus far, but in a modelling-paradigm.</p>
<section id="crude-odds-ratio---exposureoutcome" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="crude-odds-ratio---exposureoutcome"><span class="header-section-number">4.1</span> Crude Odds Ratio - Exposure/Outcome</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">glm</span>(outcome <span class="sc">~</span> coffee_drinker, <span class="at">data =</span> df, <span class="at">family =</span> <span class="st">"binomial"</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="qknwtmxiwg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qknwtmxiwg table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qknwtmxiwg thead, #qknwtmxiwg tbody, #qknwtmxiwg tfoot, #qknwtmxiwg tr, #qknwtmxiwg td, #qknwtmxiwg th {
  border-style: none;
}

#qknwtmxiwg p {
  margin: 0;
  padding: 0;
}

#qknwtmxiwg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qknwtmxiwg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qknwtmxiwg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qknwtmxiwg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qknwtmxiwg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qknwtmxiwg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qknwtmxiwg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qknwtmxiwg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qknwtmxiwg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qknwtmxiwg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qknwtmxiwg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qknwtmxiwg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qknwtmxiwg .gt_spanner_row {
  border-bottom-style: hidden;
}

#qknwtmxiwg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qknwtmxiwg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qknwtmxiwg .gt_from_md > :first-child {
  margin-top: 0;
}

#qknwtmxiwg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qknwtmxiwg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qknwtmxiwg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qknwtmxiwg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qknwtmxiwg .gt_row_group_first td {
  border-top-width: 2px;
}

#qknwtmxiwg .gt_row_group_first th {
  border-top-width: 2px;
}

#qknwtmxiwg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qknwtmxiwg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qknwtmxiwg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qknwtmxiwg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qknwtmxiwg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qknwtmxiwg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qknwtmxiwg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qknwtmxiwg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qknwtmxiwg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qknwtmxiwg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qknwtmxiwg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qknwtmxiwg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qknwtmxiwg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qknwtmxiwg .gt_left {
  text-align: left;
}

#qknwtmxiwg .gt_center {
  text-align: center;
}

#qknwtmxiwg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qknwtmxiwg .gt_font_normal {
  font-weight: normal;
}

#qknwtmxiwg .gt_font_bold {
  font-weight: bold;
}

#qknwtmxiwg .gt_font_italic {
  font-style: italic;
}

#qknwtmxiwg .gt_super {
  font-size: 65%;
}

#qknwtmxiwg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qknwtmxiwg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qknwtmxiwg .gt_indent_1 {
  text-indent: 5px;
}

#qknwtmxiwg .gt_indent_2 {
  text-indent: 10px;
}

#qknwtmxiwg .gt_indent_3 {
  text-indent: 15px;
}

#qknwtmxiwg .gt_indent_4 {
  text-indent: 20px;
}

#qknwtmxiwg .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="<strong>Characteristic</strong>"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>OR</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>95% CI</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>p-value</strong>"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">coffee_drinker</td>
<td headers="estimate" class="gt_row gt_center"><br></td>
<td headers="ci" class="gt_row gt_center"><br></td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;no</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;yes</td>
<td headers="estimate" class="gt_row gt_center">3.00</td>
<td headers="ci" class="gt_row gt_center">0.81, 12.2</td>
<td headers="p.value" class="gt_row gt_center">0.11</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="4"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
</div>
<p>We get the same OR as in <a href="#sec-cor1" class="quarto-xref">Section&nbsp;3.1</a> in addition to a 95% C.I. and p-value.</p>
</section>
<section id="adjusted-odds-ratios---exposureoutcome-via-stratification" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="adjusted-odds-ratios---exposureoutcome-via-stratification"><span class="header-section-number">4.2</span> Adjusted Odds Ratios - Exposure/Outcome (via stratification)</h3>
<p>We can replicate a stratified effect in our modelling by subsetting the data to select only those people in each smoking subgroup.</p>
<section id="smokers" class="level4" data-number="4.2.1">
<h4 data-number="4.2.1" class="anchored" data-anchor-id="smokers"><span class="header-section-number">4.2.1</span> Smokers</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">glm</span>(outcome <span class="sc">~</span> coffee_drinker, <span class="at">data =</span> <span class="fu">subset</span>(df, smoker <span class="sc">==</span> <span class="st">"yes"</span>), <span class="at">family =</span> <span class="st">"binomial"</span>) <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="gkzkgmvbgc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gkzkgmvbgc table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gkzkgmvbgc thead, #gkzkgmvbgc tbody, #gkzkgmvbgc tfoot, #gkzkgmvbgc tr, #gkzkgmvbgc td, #gkzkgmvbgc th {
  border-style: none;
}

#gkzkgmvbgc p {
  margin: 0;
  padding: 0;
}

#gkzkgmvbgc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gkzkgmvbgc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gkzkgmvbgc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gkzkgmvbgc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gkzkgmvbgc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gkzkgmvbgc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gkzkgmvbgc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gkzkgmvbgc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gkzkgmvbgc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gkzkgmvbgc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gkzkgmvbgc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gkzkgmvbgc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gkzkgmvbgc .gt_spanner_row {
  border-bottom-style: hidden;
}

#gkzkgmvbgc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gkzkgmvbgc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gkzkgmvbgc .gt_from_md > :first-child {
  margin-top: 0;
}

#gkzkgmvbgc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gkzkgmvbgc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gkzkgmvbgc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gkzkgmvbgc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gkzkgmvbgc .gt_row_group_first td {
  border-top-width: 2px;
}

#gkzkgmvbgc .gt_row_group_first th {
  border-top-width: 2px;
}

#gkzkgmvbgc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gkzkgmvbgc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gkzkgmvbgc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gkzkgmvbgc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gkzkgmvbgc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gkzkgmvbgc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gkzkgmvbgc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gkzkgmvbgc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gkzkgmvbgc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gkzkgmvbgc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gkzkgmvbgc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gkzkgmvbgc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gkzkgmvbgc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gkzkgmvbgc .gt_left {
  text-align: left;
}

#gkzkgmvbgc .gt_center {
  text-align: center;
}

#gkzkgmvbgc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gkzkgmvbgc .gt_font_normal {
  font-weight: normal;
}

#gkzkgmvbgc .gt_font_bold {
  font-weight: bold;
}

#gkzkgmvbgc .gt_font_italic {
  font-style: italic;
}

#gkzkgmvbgc .gt_super {
  font-size: 65%;
}

#gkzkgmvbgc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gkzkgmvbgc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gkzkgmvbgc .gt_indent_1 {
  text-indent: 5px;
}

#gkzkgmvbgc .gt_indent_2 {
  text-indent: 10px;
}

#gkzkgmvbgc .gt_indent_3 {
  text-indent: 15px;
}

#gkzkgmvbgc .gt_indent_4 {
  text-indent: 20px;
}

#gkzkgmvbgc .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="<strong>Characteristic</strong>"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>OR</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>95% CI</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>p-value</strong>"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">coffee_drinker</td>
<td headers="estimate" class="gt_row gt_center"><br></td>
<td headers="ci" class="gt_row gt_center"><br></td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;no</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;yes</td>
<td headers="estimate" class="gt_row gt_center">1.00</td>
<td headers="ci" class="gt_row gt_center">0.04, 12.2</td>
<td headers="p.value" class="gt_row gt_center">&gt;0.9</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="4"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
</div>
<p>OR = <code>1</code> (compare to <a href="#sec-aor1" class="quarto-xref">Section&nbsp;3.2.1</a>)</p>
</section>
<section id="non-smokers" class="level4" data-number="4.2.2">
<h4 data-number="4.2.2" class="anchored" data-anchor-id="non-smokers"><span class="header-section-number">4.2.2</span> Non-smokers</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">glm</span>(outcome <span class="sc">~</span> coffee_drinker, <span class="at">data =</span> <span class="fu">subset</span>(df, smoker <span class="sc">==</span> <span class="st">"no"</span>), <span class="at">family =</span> <span class="st">"binomial"</span>) <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="zwfoehmihe" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#zwfoehmihe table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#zwfoehmihe thead, #zwfoehmihe tbody, #zwfoehmihe tfoot, #zwfoehmihe tr, #zwfoehmihe td, #zwfoehmihe th {
  border-style: none;
}

#zwfoehmihe p {
  margin: 0;
  padding: 0;
}

#zwfoehmihe .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zwfoehmihe .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#zwfoehmihe .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zwfoehmihe .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zwfoehmihe .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zwfoehmihe .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zwfoehmihe .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zwfoehmihe .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zwfoehmihe .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zwfoehmihe .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zwfoehmihe .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zwfoehmihe .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zwfoehmihe .gt_spanner_row {
  border-bottom-style: hidden;
}

#zwfoehmihe .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#zwfoehmihe .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zwfoehmihe .gt_from_md > :first-child {
  margin-top: 0;
}

#zwfoehmihe .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zwfoehmihe .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zwfoehmihe .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zwfoehmihe .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zwfoehmihe .gt_row_group_first td {
  border-top-width: 2px;
}

#zwfoehmihe .gt_row_group_first th {
  border-top-width: 2px;
}

#zwfoehmihe .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zwfoehmihe .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zwfoehmihe .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zwfoehmihe .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zwfoehmihe .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zwfoehmihe .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zwfoehmihe .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#zwfoehmihe .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zwfoehmihe .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zwfoehmihe .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zwfoehmihe .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zwfoehmihe .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zwfoehmihe .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zwfoehmihe .gt_left {
  text-align: left;
}

#zwfoehmihe .gt_center {
  text-align: center;
}

#zwfoehmihe .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zwfoehmihe .gt_font_normal {
  font-weight: normal;
}

#zwfoehmihe .gt_font_bold {
  font-weight: bold;
}

#zwfoehmihe .gt_font_italic {
  font-style: italic;
}

#zwfoehmihe .gt_super {
  font-size: 65%;
}

#zwfoehmihe .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#zwfoehmihe .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zwfoehmihe .gt_indent_1 {
  text-indent: 5px;
}

#zwfoehmihe .gt_indent_2 {
  text-indent: 10px;
}

#zwfoehmihe .gt_indent_3 {
  text-indent: 15px;
}

#zwfoehmihe .gt_indent_4 {
  text-indent: 20px;
}

#zwfoehmihe .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="<strong>Characteristic</strong>"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>OR</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>95% CI</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>p-value</strong>"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">coffee_drinker</td>
<td headers="estimate" class="gt_row gt_center"><br></td>
<td headers="ci" class="gt_row gt_center"><br></td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;no</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;yes</td>
<td headers="estimate" class="gt_row gt_center">1.00</td>
<td headers="ci" class="gt_row gt_center">0.04, 12.3</td>
<td headers="p.value" class="gt_row gt_center">&gt;0.9</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="4"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
</div>
<p>OR = <code>1</code> (compare to <a href="#sec-aor2" class="quarto-xref">Section&nbsp;3.2.2</a>)</p>
</section>
</section>
<section id="crude-odds-ratio---confounderoutcome" class="level3" data-number="4.3">
<h3 data-number="4.3" class="anchored" data-anchor-id="crude-odds-ratio---confounderoutcome"><span class="header-section-number">4.3</span> Crude Odds Ratio - Confounder/Outcome</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">glm</span>(outcome <span class="sc">~</span> smoker, <span class="at">data =</span> df, <span class="at">family =</span> <span class="st">"binomial"</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="apgpobgeci" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#apgpobgeci table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#apgpobgeci thead, #apgpobgeci tbody, #apgpobgeci tfoot, #apgpobgeci tr, #apgpobgeci td, #apgpobgeci th {
  border-style: none;
}

#apgpobgeci p {
  margin: 0;
  padding: 0;
}

#apgpobgeci .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#apgpobgeci .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#apgpobgeci .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#apgpobgeci .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#apgpobgeci .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#apgpobgeci .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#apgpobgeci .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#apgpobgeci .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#apgpobgeci .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#apgpobgeci .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#apgpobgeci .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#apgpobgeci .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#apgpobgeci .gt_spanner_row {
  border-bottom-style: hidden;
}

#apgpobgeci .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#apgpobgeci .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#apgpobgeci .gt_from_md > :first-child {
  margin-top: 0;
}

#apgpobgeci .gt_from_md > :last-child {
  margin-bottom: 0;
}

#apgpobgeci .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#apgpobgeci .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#apgpobgeci .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#apgpobgeci .gt_row_group_first td {
  border-top-width: 2px;
}

#apgpobgeci .gt_row_group_first th {
  border-top-width: 2px;
}

#apgpobgeci .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#apgpobgeci .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#apgpobgeci .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#apgpobgeci .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#apgpobgeci .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#apgpobgeci .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#apgpobgeci .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#apgpobgeci .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#apgpobgeci .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#apgpobgeci .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#apgpobgeci .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#apgpobgeci .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#apgpobgeci .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#apgpobgeci .gt_left {
  text-align: left;
}

#apgpobgeci .gt_center {
  text-align: center;
}

#apgpobgeci .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#apgpobgeci .gt_font_normal {
  font-weight: normal;
}

#apgpobgeci .gt_font_bold {
  font-weight: bold;
}

#apgpobgeci .gt_font_italic {
  font-style: italic;
}

#apgpobgeci .gt_super {
  font-size: 65%;
}

#apgpobgeci .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#apgpobgeci .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#apgpobgeci .gt_indent_1 {
  text-indent: 5px;
}

#apgpobgeci .gt_indent_2 {
  text-indent: 10px;
}

#apgpobgeci .gt_indent_3 {
  text-indent: 15px;
}

#apgpobgeci .gt_indent_4 {
  text-indent: 20px;
}

#apgpobgeci .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="<strong>Characteristic</strong>"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>OR</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>95% CI</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>p-value</strong>"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">smoker</td>
<td headers="estimate" class="gt_row gt_center"><br></td>
<td headers="ci" class="gt_row gt_center"><br></td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;no</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;yes</td>
<td headers="estimate" class="gt_row gt_center">6.00</td>
<td headers="ci" class="gt_row gt_center">1.55, 27.5</td>
<td headers="p.value" class="gt_row gt_center">0.013</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="4"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
</div>
<p>OR = <code>6</code> (compare to <a href="#sec-cor2" class="quarto-xref">Section&nbsp;3.3</a>)</p>
</section>
<section id="adjusted-odds-ratios---confounderoutcome-via-stratification" class="level3" data-number="4.4">
<h3 data-number="4.4" class="anchored" data-anchor-id="adjusted-odds-ratios---confounderoutcome-via-stratification"><span class="header-section-number">4.4</span> Adjusted Odds Ratios - Confounder/Outcome (via stratification)</h3>
<section id="coffee-drinkers" class="level4" data-number="4.4.1">
<h4 data-number="4.4.1" class="anchored" data-anchor-id="coffee-drinkers"><span class="header-section-number">4.4.1</span> Coffee-drinkers</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">glm</span>(outcome <span class="sc">~</span> smoker, <span class="at">data =</span> <span class="fu">subset</span>(df, coffee_drinker <span class="sc">==</span> <span class="st">"yes"</span>), <span class="at">family =</span> <span class="st">"binomial"</span>) <span class="sc">|&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="zslxwkwuyu" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#zslxwkwuyu table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#zslxwkwuyu thead, #zslxwkwuyu tbody, #zslxwkwuyu tfoot, #zslxwkwuyu tr, #zslxwkwuyu td, #zslxwkwuyu th {
  border-style: none;
}

#zslxwkwuyu p {
  margin: 0;
  padding: 0;
}

#zslxwkwuyu .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zslxwkwuyu .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#zslxwkwuyu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zslxwkwuyu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zslxwkwuyu .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zslxwkwuyu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zslxwkwuyu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zslxwkwuyu .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zslxwkwuyu .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zslxwkwuyu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zslxwkwuyu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zslxwkwuyu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zslxwkwuyu .gt_spanner_row {
  border-bottom-style: hidden;
}

#zslxwkwuyu .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#zslxwkwuyu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zslxwkwuyu .gt_from_md > :first-child {
  margin-top: 0;
}

#zslxwkwuyu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zslxwkwuyu .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zslxwkwuyu .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zslxwkwuyu .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zslxwkwuyu .gt_row_group_first td {
  border-top-width: 2px;
}

#zslxwkwuyu .gt_row_group_first th {
  border-top-width: 2px;
}

#zslxwkwuyu .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zslxwkwuyu .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zslxwkwuyu .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zslxwkwuyu .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zslxwkwuyu .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zslxwkwuyu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zslxwkwuyu .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#zslxwkwuyu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zslxwkwuyu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zslxwkwuyu .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zslxwkwuyu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zslxwkwuyu .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zslxwkwuyu .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zslxwkwuyu .gt_left {
  text-align: left;
}

#zslxwkwuyu .gt_center {
  text-align: center;
}

#zslxwkwuyu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zslxwkwuyu .gt_font_normal {
  font-weight: normal;
}

#zslxwkwuyu .gt_font_bold {
  font-weight: bold;
}

#zslxwkwuyu .gt_font_italic {
  font-style: italic;
}

#zslxwkwuyu .gt_super {
  font-size: 65%;
}

#zslxwkwuyu .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#zslxwkwuyu .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zslxwkwuyu .gt_indent_1 {
  text-indent: 5px;
}

#zslxwkwuyu .gt_indent_2 {
  text-indent: 10px;
}

#zslxwkwuyu .gt_indent_3 {
  text-indent: 15px;
}

#zslxwkwuyu .gt_indent_4 {
  text-indent: 20px;
}

#zslxwkwuyu .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="<strong>Characteristic</strong>"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>OR</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>95% CI</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>p-value</strong>"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">smoker</td>
<td headers="estimate" class="gt_row gt_center"><br></td>
<td headers="ci" class="gt_row gt_center"><br></td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;no</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;yes</td>
<td headers="estimate" class="gt_row gt_center">6.00</td>
<td headers="ci" class="gt_row gt_center">0.43, 161</td>
<td headers="p.value" class="gt_row gt_center">0.2</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="4"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
</div>
<p>OR = <code>6</code> (compare to <a href="#sec-aor3" class="quarto-xref">Section&nbsp;3.4.1</a>)</p>
</section>
<section id="non-coffee-drinkers" class="level4" data-number="4.4.2">
<h4 data-number="4.4.2" class="anchored" data-anchor-id="non-coffee-drinkers"><span class="header-section-number">4.4.2</span> Non-coffee-drinkers</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">glm</span>(outcome <span class="sc">~</span> smoker, <span class="at">data =</span> <span class="fu">subset</span>(df, coffee_drinker <span class="sc">==</span> <span class="st">"no"</span>), <span class="at">family =</span> <span class="st">"binomial"</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="mrtogtnpuj" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#mrtogtnpuj table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mrtogtnpuj thead, #mrtogtnpuj tbody, #mrtogtnpuj tfoot, #mrtogtnpuj tr, #mrtogtnpuj td, #mrtogtnpuj th {
  border-style: none;
}

#mrtogtnpuj p {
  margin: 0;
  padding: 0;
}

#mrtogtnpuj .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mrtogtnpuj .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mrtogtnpuj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mrtogtnpuj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mrtogtnpuj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mrtogtnpuj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mrtogtnpuj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mrtogtnpuj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mrtogtnpuj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mrtogtnpuj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mrtogtnpuj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mrtogtnpuj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mrtogtnpuj .gt_spanner_row {
  border-bottom-style: hidden;
}

#mrtogtnpuj .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mrtogtnpuj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mrtogtnpuj .gt_from_md > :first-child {
  margin-top: 0;
}

#mrtogtnpuj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mrtogtnpuj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mrtogtnpuj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mrtogtnpuj .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mrtogtnpuj .gt_row_group_first td {
  border-top-width: 2px;
}

#mrtogtnpuj .gt_row_group_first th {
  border-top-width: 2px;
}

#mrtogtnpuj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mrtogtnpuj .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mrtogtnpuj .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mrtogtnpuj .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mrtogtnpuj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mrtogtnpuj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mrtogtnpuj .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mrtogtnpuj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mrtogtnpuj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mrtogtnpuj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mrtogtnpuj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mrtogtnpuj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mrtogtnpuj .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mrtogtnpuj .gt_left {
  text-align: left;
}

#mrtogtnpuj .gt_center {
  text-align: center;
}

#mrtogtnpuj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mrtogtnpuj .gt_font_normal {
  font-weight: normal;
}

#mrtogtnpuj .gt_font_bold {
  font-weight: bold;
}

#mrtogtnpuj .gt_font_italic {
  font-style: italic;
}

#mrtogtnpuj .gt_super {
  font-size: 65%;
}

#mrtogtnpuj .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mrtogtnpuj .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mrtogtnpuj .gt_indent_1 {
  text-indent: 5px;
}

#mrtogtnpuj .gt_indent_2 {
  text-indent: 10px;
}

#mrtogtnpuj .gt_indent_3 {
  text-indent: 15px;
}

#mrtogtnpuj .gt_indent_4 {
  text-indent: 20px;
}

#mrtogtnpuj .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="<strong>Characteristic</strong>"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>OR</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>95% CI</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>p-value</strong>"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">smoker</td>
<td headers="estimate" class="gt_row gt_center"><br></td>
<td headers="ci" class="gt_row gt_center"><br></td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;no</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;yes</td>
<td headers="estimate" class="gt_row gt_center">6.00</td>
<td headers="ci" class="gt_row gt_center">0.64, 134</td>
<td headers="p.value" class="gt_row gt_center">0.15</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="4"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
</div>
<p>OR = <code>6</code> (compare to <a href="#sec-aor4" class="quarto-xref">Section&nbsp;3.4.2</a>)</p>
</section>
</section>
<section id="adjusted-odds-ratio---overall-1" class="level3" data-number="4.5">
<h3 data-number="4.5" class="anchored" data-anchor-id="adjusted-odds-ratio---overall-1"><span class="header-section-number">4.5</span> Adjusted Odds Ratio - Overall</h3>
<p>The above models are all considered univariable in that one predictor only is specified in each model. In controlling or adjusting for a third variable we now produce a multivariable model where both the exposure and potential confounder are specified as predictors. This automatically produces an adjusted ‘effect’ of coffee drinking on CHD, controlling for smoking (and conversely an adjusted ‘effect’ of smoking on CHD, controlling for coffee drinking). We run these kinds of models all the time without thinking, but what the model is doing ‘under the hood’ is calculating a weighted average of the individual subgroup estimates in producing a single coefficient that becomes our effect/s of interest.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">glm</span>(outcome <span class="sc">~</span> coffee_drinker <span class="sc">+</span> smoker, <span class="at">data =</span> df, <span class="at">family =</span> <span class="st">"binomial"</span>) <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="gnaogmpiph" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gnaogmpiph table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gnaogmpiph thead, #gnaogmpiph tbody, #gnaogmpiph tfoot, #gnaogmpiph tr, #gnaogmpiph td, #gnaogmpiph th {
  border-style: none;
}

#gnaogmpiph p {
  margin: 0;
  padding: 0;
}

#gnaogmpiph .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gnaogmpiph .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gnaogmpiph .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gnaogmpiph .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gnaogmpiph .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gnaogmpiph .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gnaogmpiph .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gnaogmpiph .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gnaogmpiph .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gnaogmpiph .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gnaogmpiph .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gnaogmpiph .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gnaogmpiph .gt_spanner_row {
  border-bottom-style: hidden;
}

#gnaogmpiph .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gnaogmpiph .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gnaogmpiph .gt_from_md > :first-child {
  margin-top: 0;
}

#gnaogmpiph .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gnaogmpiph .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gnaogmpiph .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gnaogmpiph .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gnaogmpiph .gt_row_group_first td {
  border-top-width: 2px;
}

#gnaogmpiph .gt_row_group_first th {
  border-top-width: 2px;
}

#gnaogmpiph .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gnaogmpiph .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gnaogmpiph .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gnaogmpiph .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gnaogmpiph .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gnaogmpiph .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gnaogmpiph .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gnaogmpiph .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gnaogmpiph .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gnaogmpiph .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gnaogmpiph .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gnaogmpiph .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gnaogmpiph .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gnaogmpiph .gt_left {
  text-align: left;
}

#gnaogmpiph .gt_center {
  text-align: center;
}

#gnaogmpiph .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gnaogmpiph .gt_font_normal {
  font-weight: normal;
}

#gnaogmpiph .gt_font_bold {
  font-weight: bold;
}

#gnaogmpiph .gt_font_italic {
  font-style: italic;
}

#gnaogmpiph .gt_super {
  font-size: 65%;
}

#gnaogmpiph .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gnaogmpiph .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gnaogmpiph .gt_indent_1 {
  text-indent: 5px;
}

#gnaogmpiph .gt_indent_2 {
  text-indent: 10px;
}

#gnaogmpiph .gt_indent_3 {
  text-indent: 15px;
}

#gnaogmpiph .gt_indent_4 {
  text-indent: 20px;
}

#gnaogmpiph .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="<strong>Characteristic</strong>"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>OR</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>95% CI</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>p-value</strong>"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">coffee_drinker</td>
<td headers="estimate" class="gt_row gt_center"><br></td>
<td headers="ci" class="gt_row gt_center"><br></td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;no</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;yes</td>
<td headers="estimate" class="gt_row gt_center">1.00</td>
<td headers="ci" class="gt_row gt_center">0.13, 5.84</td>
<td headers="p.value" class="gt_row gt_center">&gt;0.9</td></tr>
    <tr><td headers="label" class="gt_row gt_left">smoker</td>
<td headers="estimate" class="gt_row gt_center"><br></td>
<td headers="ci" class="gt_row gt_center"><br></td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;no</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;yes</td>
<td headers="estimate" class="gt_row gt_center">6.00</td>
<td headers="ci" class="gt_row gt_center">1.08, 48.2</td>
<td headers="p.value" class="gt_row gt_center">0.054</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="4"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
</div>
</section>
</section>
<section id="some-guidelines" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="some-guidelines"><span class="header-section-number">5</span> Some Guidelines…</h2>
<p>To consolidate the ideas that we have explored today I want to lay out some very broad guidelines for how to interpret and compare crude and adjusted effects.</p>
<section id="no-confounding-or-effect-modification-present" class="level3" data-number="5.1">
<h3 data-number="5.1" class="anchored" data-anchor-id="no-confounding-or-effect-modification-present"><span class="header-section-number">5.1</span> No Confounding or Effect Modification Present</h3>
<p>If there is neither confounding nor effect modification, the crude estimate of association and the stratum-specific estimates will be similar (converging to being the same in the ideal context). This is reflected in <a href="#sec-cor2" class="quarto-xref">Sections&nbsp;3.3</a> and <a href="#sec-aor5" class="quarto-xref">Section&nbsp;3.4</a> above.</p>
</section>
<section id="only-confounding-present" class="level3" data-number="5.2">
<h3 data-number="5.2" class="anchored" data-anchor-id="only-confounding-present"><span class="header-section-number">5.2</span> Only Confounding Present</h3>
<p>If there is only confounding, the stratum-specific measures of association will be similar to one another, but they will be different from the overall crude estimate (by ~ 10% or more). In this situation, one can use CMH methods to calculate a weighted estimate and p-value, or even easier is to run a statistical model including the confounder as just another covariate. i.e.&nbsp;(in <code>R</code>)</p>
<p><code>mod1 &lt;- lm(outcome ~ exposure + confounder, data = dat)</code></p>
<p>This is reflected in <a href="#sec-cor1" class="quarto-xref">Sections&nbsp;3.1</a> and <a href="#sec-aor" class="quarto-xref">Section&nbsp;3.2</a> above.</p>
</section>
<section id="confounding-andor-effect-modification-present" class="level3" data-number="5.3">
<h3 data-number="5.3" class="anchored" data-anchor-id="confounding-andor-effect-modification-present"><span class="header-section-number">5.3</span> Confounding and/or Effect Modification Present</h3>
<p>In this case the stratum-specific estimates will differ from one another significantly and these will also differ from the overall crude estimate. These effects should be reported as they are and <strong>not</strong> weighted and combined (i.e.&nbsp;averaged over) as this is of scientific and clinical interest in its own right. In practical terms in a statistical model, an interaction term should be specified. This changes the coding from:</p>
<p><code>mod1 &lt;- lm(outcome ~ exposure + confounder, data = dat)</code></p>
<p>to</p>
<p><code>mod2 &lt;- lm(outcome ~ exposure * confounder, data = dat)</code></p>
<p>As the two models are ‘nested’, an assessment of whether the interaction term is necessary or not can be performed using a likelihood ratio test:</p>
<p><code>anova(mod2, mod1)</code></p>
<p>If the p-value is significant you can conclude that the interaction term increases the explanatory power of the model and should be retained.</p>
</section>
</section>
<section id="the-end" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="the-end"><span class="header-section-number">6</span> The End!</h2>
<p>Another post that has gone on longer than I had anticipated - there is much more I could talk about on the topic but my goal is not to make you fall asleep on your keyboard. Hopefully this has helped to make the concept of confounding just that little bit clearer in your mind. Until next time…</p>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="pgseye/Weekly_Stats_Tips" data-repo-id="R_kgDOKvfOfQ" data-category="General" data-category-id="DIC_kwDOKvfOfc4CbFWq" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark"><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb21" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb21-1"><a href="#cb21-1"></a><span class="co">---</span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="an">title:</span><span class="co"> "Epi. 101 Lesson - Confounding"</span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="an">date:</span><span class="co"> 2024-09-20</span></span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="an">categories:</span><span class="co"> [analysis, code, concept, modelling]</span></span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="co">#image: ""</span></span>
<span id="cb21-6"><a href="#cb21-6"></a><span class="an">description:</span><span class="co"> "Confounding - how statistical adjustment relates to stratification."</span></span>
<span id="cb21-7"><a href="#cb21-7"></a><span class="an">format:</span></span>
<span id="cb21-8"><a href="#cb21-8"></a><span class="co">  html:</span></span>
<span id="cb21-9"><a href="#cb21-9"></a><span class="co">    html-table-processing: none</span></span>
<span id="cb21-10"><a href="#cb21-10"></a><span class="co">---</span></span>
<span id="cb21-11"><a href="#cb21-11"></a></span>
<span id="cb21-12"><a href="#cb21-12"></a><span class="fu">## Background</span></span>
<span id="cb21-13"><a href="#cb21-13"></a></span>
<span id="cb21-14"><a href="#cb21-14"></a>I know I have touched on confounding before but it's such an important concept in statistics that I thought I would dedicate a post to it today. There is so much one could talk about on the topic, but my aim is to provide you with some intuition as to what is actually happening when one variable 'confuses' the relationship between two others.</span>
<span id="cb21-15"><a href="#cb21-15"></a></span>
<span id="cb21-16"><a href="#cb21-16"></a>I'm going to use a fairly classic example from epidemiology that examines whether there is an association between drinking coffee (full-cream milk only thanks) and developing coronary heart disease (CHD).</span>
<span id="cb21-17"><a href="#cb21-17"></a></span>
<span id="cb21-18"><a href="#cb21-18"></a>::: callout-note</span>
<span id="cb21-19"><a href="#cb21-19"></a>In a sense this is a causal question - i.e. "Does drinking coffee *cause* CHD?", but for the sake of the illustration, let's excuse ourselves from such a question's fairly strict assumptions for the time being.</span>
<span id="cb21-20"><a href="#cb21-20"></a>:::</span>
<span id="cb21-21"><a href="#cb21-21"></a></span>
<span id="cb21-22"><a href="#cb21-22"></a>Being the good researchers that we are, we give considerable thought as to *how* to answer our question. That means we don't forgo our own field-expertise and knowledge at the expense of the data-driven p-value gods. First and foremost, we think about the relationships we are investigating and *all* the potential factors that could influence those relationships. And that comes from theory, not statistical tests.</span>
<span id="cb21-23"><a href="#cb21-23"></a></span>
<span id="cb21-24"><a href="#cb21-24"></a>In examining those knowledge-driven theoretical relationships, we draw a **Directed Acyclic Graph (DAG)**. This is a topic in its own right, but for another post - in the meantime some good primers can be found <span class="co">[</span><span class="ot">here</span><span class="co">](https://onlinelibrary.wiley.com/doi/10.1111/resp.12238)</span> and <span class="co">[</span><span class="ot">here</span><span class="co">](https://health.ucdavis.edu/media-resources/ctsc/documents/pdfs/directed-acyclic-graphs20220209.pdf)</span>. A DAG is otherwise more simply known as a causal diagram. It is meant to provide a visual representation of the causal relationships among a set of variables and in doing this forces the researcher to think about their scientific question in a more holistic manner. Indeed, statistical tests aren't even involved at this point.</span>
<span id="cb21-25"><a href="#cb21-25"></a></span>
<span id="cb21-26"><a href="#cb21-26"></a>So, in thinking about our coffee-CHD question, it occurs to us that smoking is known to cause CHD and we wonder whether smoking might also be related to drinking coffee - i.e. do coffee-drinkers also smoke more (or less) than people who prefer don't drink coffee (tea perhaps?). In this case, a simple DAG might look something like:</span>
<span id="cb21-27"><a href="#cb21-27"></a></span>
<span id="cb21-28"><a href="#cb21-28"></a><span class="al">![](images/coffee_dag.png)</span>{fig-align="center" width="80%"}</span>
<span id="cb21-29"><a href="#cb21-29"></a></span>
<span id="cb21-30"><a href="#cb21-30"></a>What this DAG helps to summarise is what we are now wondering - is smoking confusing or distorting the association between coffee drinking and the development of CHD? In other words, is smoking a **confounder** in the association between our **exposure** (coffee-drinking) and **outcome** (CHD) variables of interest?</span>
<span id="cb21-31"><a href="#cb21-31"></a></span>
<span id="cb21-32"><a href="#cb21-32"></a>Before we take a peek at our data, let's refresh our memories regarding the three conditions a variable must fulfil to be considered a putative confounder:</span>
<span id="cb21-33"><a href="#cb21-33"></a></span>
<span id="cb21-34"><a href="#cb21-34"></a><span class="ss">1.  </span>The variable must be associated with **both** the exposure and the outcome.</span>
<span id="cb21-35"><a href="#cb21-35"></a><span class="ss">2.  </span>The variable must be distributed **unequally** across the exposure (e.g. between treatment groups).</span>
<span id="cb21-36"><a href="#cb21-36"></a><span class="ss">3.  </span>The variable must **not** lie on the causal pathway between the exposure and the outcome (this would be a mediator and requires different treatment).</span>
<span id="cb21-37"><a href="#cb21-37"></a></span>
<span id="cb21-38"><a href="#cb21-38"></a><span class="fu">## Data</span></span>
<span id="cb21-39"><a href="#cb21-39"></a></span>
<span id="cb21-40"><a href="#cb21-40"></a>Ok, let's now take a look at the hypothetical retrospective case-control data we'll be using today. It consists of <span class="in">`40`</span> observations and three variables:</span>
<span id="cb21-41"><a href="#cb21-41"></a></span>
<span id="cb21-42"><a href="#cb21-42"></a><span class="ss">-   </span><span class="in">`outcome`</span> - did the individual have CHD (case) or not (control).</span>
<span id="cb21-43"><a href="#cb21-43"></a></span>
<span id="cb21-44"><a href="#cb21-44"></a><span class="ss">-   </span><span class="in">`coffee-drinker`</span> - was the individual a coffee-drinker or not. This is our exposure variable of interest.</span>
<span id="cb21-45"><a href="#cb21-45"></a></span>
<span id="cb21-46"><a href="#cb21-46"></a><span class="ss">-   </span><span class="in">`smoker`</span> - was the individual a smoker or not. This is our potential confounder.</span>
<span id="cb21-47"><a href="#cb21-47"></a></span>
<span id="cb21-50"><a href="#cb21-50"></a><span class="in">```{r}</span></span>
<span id="cb21-51"><a href="#cb21-51"></a><span class="co">#| message: false</span></span>
<span id="cb21-52"><a href="#cb21-52"></a><span class="co">#| warning: false</span></span>
<span id="cb21-53"><a href="#cb21-53"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb21-54"><a href="#cb21-54"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb21-55"><a href="#cb21-55"></a><span class="fu">library</span>(ggmosaic)</span>
<span id="cb21-56"><a href="#cb21-56"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb21-57"><a href="#cb21-57"></a><span class="fu">library</span>(janitor)</span>
<span id="cb21-58"><a href="#cb21-58"></a></span>
<span id="cb21-59"><a href="#cb21-59"></a><span class="co"># Hypothetical data</span></span>
<span id="cb21-60"><a href="#cb21-60"></a>y <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">20</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">20</span>)), <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"control"</span>, <span class="st">"case"</span>))</span>
<span id="cb21-61"><a href="#cb21-61"></a>x1 <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">10</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">10</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">15</span>)), <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"no"</span>, <span class="st">"yes"</span>))</span>
<span id="cb21-62"><a href="#cb21-62"></a>x2 <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">9</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">7</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">2</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">14</span>)), <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"no"</span>, <span class="st">"yes"</span>))</span>
<span id="cb21-63"><a href="#cb21-63"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"outcome"</span> <span class="ot">=</span> y, <span class="st">"coffee_drinker"</span> <span class="ot">=</span> x1, <span class="st">"smoker"</span> <span class="ot">=</span> x2)</span>
<span id="cb21-64"><a href="#cb21-64"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb21-65"><a href="#cb21-65"></a>  <span class="fu">kable</span>(<span class="at">align =</span> <span class="st">"c"</span>)</span>
<span id="cb21-66"><a href="#cb21-66"></a><span class="in">```</span></span>
<span id="cb21-67"><a href="#cb21-67"></a></span>
<span id="cb21-68"><a href="#cb21-68"></a><span class="fu">## Simple Epidemiological Approach</span></span>
<span id="cb21-69"><a href="#cb21-69"></a></span>
<span id="cb21-70"><a href="#cb21-70"></a>Given the binary nature of all three variables we can explore the relationships nicely using a basic workhorse of epidemiological analysis - the **2x2 contingency table**. In its simplest form this shows the frequency cross-tabulation of the exposure with the outcome. However, I think it's also useful to display the **conditional row percentages** - in other words, the proportions (probabilities) of each outcome (categories as columns) **given** a particular exposure (categories as rows). In this way it is easy to eyeball whether the exposure is associated with the outcome without doing any specific test simply by looking at whether the row percentages vary greatly. As a good visual accompaniment for each cross-tabulation, I am also going to generate mosaic plots. These can give you an impression of potential associations without using any actual numbers.</span>
<span id="cb21-71"><a href="#cb21-71"></a></span>
<span id="cb21-72"><a href="#cb21-72"></a><span class="fu">### Crude Odds Ratio - Exposure/Outcome {#sec-cor1}</span></span>
<span id="cb21-73"><a href="#cb21-73"></a></span>
<span id="cb21-74"><a href="#cb21-74"></a>The following cross-tabulation and mosaic plot show the potential association between coffee-drinking and CHD. If we look at the proportions of people with CHD in each exposure group we can see that these do in fact differ - <span class="in">`67%`</span> of coffee drinkers develop CHD, compared to <span class="in">`40%`</span> of non-coffee drinkers. That is a telling sign of an association before we even do anything. The mosaic plot mirrors these numbers graphically.</span>
<span id="cb21-75"><a href="#cb21-75"></a></span>
<span id="cb21-76"><a href="#cb21-76"></a>::: {.column width="45%"}</span>
<span id="cb21-79"><a href="#cb21-79"></a><span class="in">```{r}</span></span>
<span id="cb21-80"><a href="#cb21-80"></a>tab <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb21-81"><a href="#cb21-81"></a>  <span class="fu">tabyl</span>(coffee_drinker, outcome) <span class="sc">|&gt;</span> </span>
<span id="cb21-82"><a href="#cb21-82"></a>  <span class="fu">adorn_totals</span>(<span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb21-83"><a href="#cb21-83"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"row"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-84"><a href="#cb21-84"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">rounding =</span> <span class="st">"half up"</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-85"><a href="#cb21-85"></a>  <span class="fu">adorn_ns</span>() <span class="sc">|&gt;</span> </span>
<span id="cb21-86"><a href="#cb21-86"></a>  <span class="fu">adorn_title</span>(<span class="st">"combined"</span>)</span>
<span id="cb21-87"><a href="#cb21-87"></a>tab[<span class="dv">1</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-88"><a href="#cb21-88"></a>tab[<span class="dv">1</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-89"><a href="#cb21-89"></a>tab[<span class="dv">2</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-90"><a href="#cb21-90"></a>tab[<span class="dv">2</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-91"><a href="#cb21-91"></a>tab <span class="sc">|&gt;</span> </span>
<span id="cb21-92"><a href="#cb21-92"></a>  <span class="fu">kable</span>(<span class="st">"html"</span>, <span class="at">escape =</span> F) <span class="sc">|&gt;</span> </span>
<span id="cb21-93"><a href="#cb21-93"></a>  <span class="fu">kable_paper</span>(<span class="at">bootstrap_options =</span> <span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span>
<span id="cb21-94"><a href="#cb21-94"></a><span class="in">```</span></span>
<span id="cb21-95"><a href="#cb21-95"></a>:::</span>
<span id="cb21-96"><a href="#cb21-96"></a></span>
<span id="cb21-97"><a href="#cb21-97"></a>::: {.column width="8%"}</span>
<span id="cb21-98"><a href="#cb21-98"></a>:::</span>
<span id="cb21-99"><a href="#cb21-99"></a></span>
<span id="cb21-100"><a href="#cb21-100"></a>::: {.column width="45%"}</span>
<span id="cb21-103"><a href="#cb21-103"></a><span class="in">```{r}</span></span>
<span id="cb21-104"><a href="#cb21-104"></a><span class="co">#| message: false</span></span>
<span id="cb21-105"><a href="#cb21-105"></a><span class="co">#| warning: false</span></span>
<span id="cb21-106"><a href="#cb21-106"></a>df2 <span class="ot">&lt;-</span> df</span>
<span id="cb21-107"><a href="#cb21-107"></a>df2<span class="sc">$</span>coffee_drinker <span class="ot">&lt;-</span> <span class="fu">relevel</span>(df2<span class="sc">$</span>coffee_drinker, <span class="at">ref =</span> <span class="st">"yes"</span>)</span>
<span id="cb21-108"><a href="#cb21-108"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df2) <span class="sc">+</span></span>
<span id="cb21-109"><a href="#cb21-109"></a> <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(outcome, coffee_drinker), <span class="at">fill =</span> coffee_drinker)) <span class="sc">+</span></span>
<span id="cb21-110"><a href="#cb21-110"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb21-111"><a href="#cb21-111"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb21-112"><a href="#cb21-112"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">40</span>)</span>
<span id="cb21-113"><a href="#cb21-113"></a><span class="in">```</span></span>
<span id="cb21-114"><a href="#cb21-114"></a>:::</span>
<span id="cb21-115"><a href="#cb21-115"></a></span>
<span id="cb21-116"><a href="#cb21-116"></a>Working out the odds ratio (OR) from a 2x2 contingency table is trivial. We want to divide the odds of having CHD given being a coffee-drinker by the odds of having CHD given being a non-coffee-drinker. That is:</span>
<span id="cb21-117"><a href="#cb21-117"></a></span>
<span id="cb21-118"><a href="#cb21-118"></a>$$\text{OR} = \frac{\text{10/5}}{10/15}$$</span>
<span id="cb21-119"><a href="#cb21-119"></a></span>
<span id="cb21-120"><a href="#cb21-120"></a>Or equivalently:</span>
<span id="cb21-121"><a href="#cb21-121"></a></span>
<span id="cb21-122"><a href="#cb21-122"></a>$$\text{OR} = \frac{\text{10 x 15}}{\text{5 x 10}} = 3$$ The OR is <span class="in">`3`</span> which indicates a <span class="in">`3-fold`</span> increase in the odds of CHD among coffee-drinkers compared to their non-coffee-drinking peers. We consider this a **crude** or **unadjusted** effect estimate.</span>
<span id="cb21-123"><a href="#cb21-123"></a></span>
<span id="cb21-124"><a href="#cb21-124"></a><span class="fu">### Adjusted Odds Ratios - Exposure/Outcome (via stratification) {#sec-aor}</span></span>
<span id="cb21-125"><a href="#cb21-125"></a></span>
<span id="cb21-126"><a href="#cb21-126"></a>To this point we haven't even considered any potential confounding effect of smoking. So how could we incorporate that into the current analysis using 2x2 contingency tables? It's actually very easy - we just stratify on smoking and generate two contingency tables - one for the association between coffee drinking and CHD in smokers and one for the association between coffee drinking and CHD in non-smokers. It then follows that **within each stratum of smoking the effect of smoking is 'held constant' and therefore cannot confound the association between coffee drinking and CHD.** In other words, this becomes an **adjusted** 'effect' of coffee drinking on CHD and is equivalent to 'controlling' for smoking in a multivariable statistical model (which I will demonstrate shortly).</span>
<span id="cb21-127"><a href="#cb21-127"></a></span>
<span id="cb21-128"><a href="#cb21-128"></a><span class="fu">#### Smokers {#sec-aor1}</span></span>
<span id="cb21-129"><a href="#cb21-129"></a></span>
<span id="cb21-130"><a href="#cb21-130"></a>So, the cross-tabulation for the association between coffee-drinking and CHD **in smokers**, becomes:</span>
<span id="cb21-131"><a href="#cb21-131"></a></span>
<span id="cb21-132"><a href="#cb21-132"></a>::: {.column width="45%"}</span>
<span id="cb21-135"><a href="#cb21-135"></a><span class="in">```{r}</span></span>
<span id="cb21-136"><a href="#cb21-136"></a>tab <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb21-137"><a href="#cb21-137"></a>  <span class="fu">filter</span>(smoker <span class="sc">==</span> <span class="st">"yes"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-138"><a href="#cb21-138"></a>  <span class="fu">tabyl</span>(coffee_drinker, outcome) <span class="sc">|&gt;</span> </span>
<span id="cb21-139"><a href="#cb21-139"></a>  <span class="fu">adorn_totals</span>(<span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb21-140"><a href="#cb21-140"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"row"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-141"><a href="#cb21-141"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">rounding =</span> <span class="st">"half up"</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-142"><a href="#cb21-142"></a>  <span class="fu">adorn_ns</span>() <span class="sc">|&gt;</span> </span>
<span id="cb21-143"><a href="#cb21-143"></a>  <span class="fu">adorn_title</span>(<span class="st">"combined"</span>)</span>
<span id="cb21-144"><a href="#cb21-144"></a>tab[<span class="dv">1</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-145"><a href="#cb21-145"></a>tab[<span class="dv">1</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-146"><a href="#cb21-146"></a>tab[<span class="dv">2</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-147"><a href="#cb21-147"></a>tab[<span class="dv">2</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-148"><a href="#cb21-148"></a>tab <span class="sc">|&gt;</span> </span>
<span id="cb21-149"><a href="#cb21-149"></a>  <span class="fu">kable</span>(<span class="st">"html"</span>, <span class="at">escape =</span> F) <span class="sc">|&gt;</span> </span>
<span id="cb21-150"><a href="#cb21-150"></a>  <span class="fu">kable_paper</span>(<span class="at">bootstrap_options =</span> <span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span>
<span id="cb21-151"><a href="#cb21-151"></a><span class="in">```</span></span>
<span id="cb21-152"><a href="#cb21-152"></a>:::</span>
<span id="cb21-153"><a href="#cb21-153"></a></span>
<span id="cb21-154"><a href="#cb21-154"></a>::: {.column width="8%"}</span>
<span id="cb21-155"><a href="#cb21-155"></a>:::</span>
<span id="cb21-156"><a href="#cb21-156"></a></span>
<span id="cb21-157"><a href="#cb21-157"></a>::: {.column width="45%"}</span>
<span id="cb21-160"><a href="#cb21-160"></a><span class="in">```{r}</span></span>
<span id="cb21-161"><a href="#cb21-161"></a><span class="co">#| message: false</span></span>
<span id="cb21-162"><a href="#cb21-162"></a><span class="co">#| warning: false</span></span>
<span id="cb21-163"><a href="#cb21-163"></a>df2 <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb21-164"><a href="#cb21-164"></a>  <span class="fu">filter</span>(smoker <span class="sc">==</span> <span class="st">"yes"</span>)</span>
<span id="cb21-165"><a href="#cb21-165"></a>df2<span class="sc">$</span>coffee_drinker <span class="ot">&lt;-</span> <span class="fu">relevel</span>(df2<span class="sc">$</span>coffee_drinker, <span class="at">ref =</span> <span class="st">"yes"</span>)</span>
<span id="cb21-166"><a href="#cb21-166"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df2) <span class="sc">+</span></span>
<span id="cb21-167"><a href="#cb21-167"></a> <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(outcome, coffee_drinker), <span class="at">fill =</span> coffee_drinker)) <span class="sc">+</span></span>
<span id="cb21-168"><a href="#cb21-168"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb21-169"><a href="#cb21-169"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb21-170"><a href="#cb21-170"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">40</span>)</span>
<span id="cb21-171"><a href="#cb21-171"></a><span class="in">```</span></span>
<span id="cb21-172"><a href="#cb21-172"></a>:::</span>
<span id="cb21-173"><a href="#cb21-173"></a></span>
<span id="cb21-174"><a href="#cb21-174"></a>Note how this time the (conditional row) proportions of people with CHD in each exposure group are more similar (in this contrived example they are the same) - in this subgroup of smokers it doesn't matter whether you're a coffee drinker or not - <span class="in">`75%`</span> of people have CHD.</span>
<span id="cb21-175"><a href="#cb21-175"></a></span>
<span id="cb21-176"><a href="#cb21-176"></a>Now, the OR is calculated as:</span>
<span id="cb21-177"><a href="#cb21-177"></a></span>
<span id="cb21-178"><a href="#cb21-178"></a>$$\text{OR} = \frac{\text{9 x 1}}{\text{3 x 3}} = 1$$</span>
<span id="cb21-179"><a href="#cb21-179"></a></span>
<span id="cb21-180"><a href="#cb21-180"></a>The OR is <span class="in">`1`</span> - in other words there is no longer any association between coffee drinking and CHD. We consider this an **adjusted** OR as we have removed any potential confounding effect of smoking by holding it at a constant value (i.e. everyone is a smoker).</span>
<span id="cb21-181"><a href="#cb21-181"></a></span>
<span id="cb21-182"><a href="#cb21-182"></a><span class="fu">#### Non-smokers {#sec-aor2}</span></span>
<span id="cb21-183"><a href="#cb21-183"></a></span>
<span id="cb21-184"><a href="#cb21-184"></a>Now let's consider the non-smokers. The cross-tabulation for the association between coffee-drinking and CHD **in non-smokers** is:</span>
<span id="cb21-185"><a href="#cb21-185"></a></span>
<span id="cb21-186"><a href="#cb21-186"></a>::: {.column width="45%"}</span>
<span id="cb21-189"><a href="#cb21-189"></a><span class="in">```{r}</span></span>
<span id="cb21-190"><a href="#cb21-190"></a>tab <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb21-191"><a href="#cb21-191"></a>  <span class="fu">filter</span>(smoker <span class="sc">==</span> <span class="st">"no"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-192"><a href="#cb21-192"></a>  <span class="fu">tabyl</span>(coffee_drinker, outcome) <span class="sc">|&gt;</span> </span>
<span id="cb21-193"><a href="#cb21-193"></a>  <span class="fu">adorn_totals</span>(<span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb21-194"><a href="#cb21-194"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"row"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-195"><a href="#cb21-195"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">rounding =</span> <span class="st">"half up"</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-196"><a href="#cb21-196"></a>  <span class="fu">adorn_ns</span>() <span class="sc">|&gt;</span> </span>
<span id="cb21-197"><a href="#cb21-197"></a>  <span class="fu">adorn_title</span>(<span class="st">"combined"</span>)</span>
<span id="cb21-198"><a href="#cb21-198"></a>tab[<span class="dv">1</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-199"><a href="#cb21-199"></a>tab[<span class="dv">1</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-200"><a href="#cb21-200"></a>tab[<span class="dv">2</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-201"><a href="#cb21-201"></a>tab[<span class="dv">2</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-202"><a href="#cb21-202"></a>tab <span class="sc">|&gt;</span> </span>
<span id="cb21-203"><a href="#cb21-203"></a>  <span class="fu">kable</span>(<span class="st">"html"</span>, <span class="at">escape =</span> F) <span class="sc">|&gt;</span> </span>
<span id="cb21-204"><a href="#cb21-204"></a>  <span class="fu">kable_paper</span>(<span class="at">bootstrap_options =</span> <span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span>
<span id="cb21-205"><a href="#cb21-205"></a><span class="in">```</span></span>
<span id="cb21-206"><a href="#cb21-206"></a>:::</span>
<span id="cb21-207"><a href="#cb21-207"></a></span>
<span id="cb21-208"><a href="#cb21-208"></a>::: {.column width="8%"}</span>
<span id="cb21-209"><a href="#cb21-209"></a>:::</span>
<span id="cb21-210"><a href="#cb21-210"></a></span>
<span id="cb21-211"><a href="#cb21-211"></a>::: {.column width="45%"}</span>
<span id="cb21-214"><a href="#cb21-214"></a><span class="in">```{r}</span></span>
<span id="cb21-215"><a href="#cb21-215"></a><span class="co">#| message: false</span></span>
<span id="cb21-216"><a href="#cb21-216"></a><span class="co">#| warning: false</span></span>
<span id="cb21-217"><a href="#cb21-217"></a>df2 <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb21-218"><a href="#cb21-218"></a>  <span class="fu">filter</span>(smoker <span class="sc">==</span> <span class="st">"no"</span>)</span>
<span id="cb21-219"><a href="#cb21-219"></a>df2<span class="sc">$</span>coffee_drinker <span class="ot">&lt;-</span> <span class="fu">relevel</span>(df2<span class="sc">$</span>coffee_drinker, <span class="at">ref =</span> <span class="st">"yes"</span>)</span>
<span id="cb21-220"><a href="#cb21-220"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df2) <span class="sc">+</span></span>
<span id="cb21-221"><a href="#cb21-221"></a> <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(outcome, coffee_drinker), <span class="at">fill =</span> coffee_drinker)) <span class="sc">+</span></span>
<span id="cb21-222"><a href="#cb21-222"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb21-223"><a href="#cb21-223"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb21-224"><a href="#cb21-224"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">40</span>)</span>
<span id="cb21-225"><a href="#cb21-225"></a><span class="in">```</span></span>
<span id="cb21-226"><a href="#cb21-226"></a>:::</span>
<span id="cb21-227"><a href="#cb21-227"></a></span>
<span id="cb21-228"><a href="#cb21-228"></a>Do you see a pattern here? Again, the conditional row percentages are the same across exposure groups (<span class="in">`33%`</span>) - so, in this subgroup of non-smokers it also doesn't matter whether you are a coffee drnker or not, the proportions of CHD are the same.</span>
<span id="cb21-229"><a href="#cb21-229"></a></span>
<span id="cb21-230"><a href="#cb21-230"></a>The OR this time is:</span>
<span id="cb21-231"><a href="#cb21-231"></a></span>
<span id="cb21-232"><a href="#cb21-232"></a>$$\text{OR} = \frac{\text{1 x 14}}{\text{7 x 2}} = 1$$</span>
<span id="cb21-233"><a href="#cb21-233"></a></span>
<span id="cb21-234"><a href="#cb21-234"></a>The **adjusted** OR is again <span class="in">`1`</span> - that is, there is no association between coffee drinking and CHD when we remove any potential confounding effect of smoking by holding it at a (different) constant value (i.e. everyone is a non-smoker).</span>
<span id="cb21-235"><a href="#cb21-235"></a></span>
<span id="cb21-236"><a href="#cb21-236"></a><span class="fu">#### Salient points</span></span>
<span id="cb21-237"><a href="#cb21-237"></a></span>
<span id="cb21-238"><a href="#cb21-238"></a>There are two important points to make in the comparison of the crude and adjusted estimates:</span>
<span id="cb21-239"><a href="#cb21-239"></a></span>
<span id="cb21-240"><a href="#cb21-240"></a><span class="ss">1.  </span>The adjusted OR is not equal to the crude OR - this suggests confounding is present.</span>
<span id="cb21-241"><a href="#cb21-241"></a><span class="ss">2.  </span>Furthermore, this represents a special case in which there is *complete* confounding - the OR reduces to the null value (i.e. <span class="in">`1`</span>). I will expand on these points in a moment.</span>
<span id="cb21-242"><a href="#cb21-242"></a></span>
<span id="cb21-243"><a href="#cb21-243"></a><span class="fu">### Crude Odds Ratio - Confounder/Outcome {#sec-cor2}</span></span>
<span id="cb21-244"><a href="#cb21-244"></a></span>
<span id="cb21-245"><a href="#cb21-245"></a>To further illuminate the above ideas let's repeat the analyses but this time 'switch' the exposure and confounder around (hopefully it will become clear why we are doing this as you continue reading). The cross-tabulation and mosaic plot suggest an association between smoking and CHD - <span class="in">`75%`</span> of smokers develop CHD, compared to <span class="in">`33%`</span> of non-smokers.</span>
<span id="cb21-246"><a href="#cb21-246"></a></span>
<span id="cb21-247"><a href="#cb21-247"></a>::: {.column width="45%"}</span>
<span id="cb21-250"><a href="#cb21-250"></a><span class="in">```{r}</span></span>
<span id="cb21-251"><a href="#cb21-251"></a>tab <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb21-252"><a href="#cb21-252"></a>  <span class="fu">tabyl</span>(smoker, outcome) <span class="sc">|&gt;</span> </span>
<span id="cb21-253"><a href="#cb21-253"></a>  <span class="fu">adorn_totals</span>(<span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb21-254"><a href="#cb21-254"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"row"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-255"><a href="#cb21-255"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">rounding =</span> <span class="st">"half up"</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-256"><a href="#cb21-256"></a>  <span class="fu">adorn_ns</span>() <span class="sc">|&gt;</span> </span>
<span id="cb21-257"><a href="#cb21-257"></a>  <span class="fu">adorn_title</span>(<span class="st">"combined"</span>)</span>
<span id="cb21-258"><a href="#cb21-258"></a>tab[<span class="dv">1</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-259"><a href="#cb21-259"></a>tab[<span class="dv">1</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-260"><a href="#cb21-260"></a>tab[<span class="dv">2</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-261"><a href="#cb21-261"></a>tab[<span class="dv">2</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-262"><a href="#cb21-262"></a>tab <span class="sc">|&gt;</span> </span>
<span id="cb21-263"><a href="#cb21-263"></a>  <span class="fu">kable</span>(<span class="st">"html"</span>, <span class="at">escape =</span> F) <span class="sc">|&gt;</span> </span>
<span id="cb21-264"><a href="#cb21-264"></a>  <span class="fu">kable_paper</span>(<span class="at">bootstrap_options =</span> <span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span>
<span id="cb21-265"><a href="#cb21-265"></a><span class="in">```</span></span>
<span id="cb21-266"><a href="#cb21-266"></a>:::</span>
<span id="cb21-267"><a href="#cb21-267"></a></span>
<span id="cb21-268"><a href="#cb21-268"></a>::: {.column width="8%"}</span>
<span id="cb21-269"><a href="#cb21-269"></a>:::</span>
<span id="cb21-270"><a href="#cb21-270"></a></span>
<span id="cb21-271"><a href="#cb21-271"></a>::: {.column width="45%"}</span>
<span id="cb21-274"><a href="#cb21-274"></a><span class="in">```{r}</span></span>
<span id="cb21-275"><a href="#cb21-275"></a><span class="co">#| message: false</span></span>
<span id="cb21-276"><a href="#cb21-276"></a><span class="co">#| warning: false</span></span>
<span id="cb21-277"><a href="#cb21-277"></a>df2 <span class="ot">&lt;-</span> df</span>
<span id="cb21-278"><a href="#cb21-278"></a>df2<span class="sc">$</span>smoker <span class="ot">&lt;-</span> <span class="fu">relevel</span>(df2<span class="sc">$</span>smoker, <span class="at">ref =</span> <span class="st">"yes"</span>)</span>
<span id="cb21-279"><a href="#cb21-279"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df2) <span class="sc">+</span></span>
<span id="cb21-280"><a href="#cb21-280"></a> <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(outcome, smoker), <span class="at">fill =</span> smoker)) <span class="sc">+</span></span>
<span id="cb21-281"><a href="#cb21-281"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb21-282"><a href="#cb21-282"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb21-283"><a href="#cb21-283"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">40</span>)</span>
<span id="cb21-284"><a href="#cb21-284"></a><span class="in">```</span></span>
<span id="cb21-285"><a href="#cb21-285"></a>:::</span>
<span id="cb21-286"><a href="#cb21-286"></a></span>
<span id="cb21-287"><a href="#cb21-287"></a>The OR for the association between smoking and CHD is:</span>
<span id="cb21-288"><a href="#cb21-288"></a></span>
<span id="cb21-289"><a href="#cb21-289"></a>$$\text{OR} = \frac{\text{12 x 16}}{\text{8 x 4}} = 6$$</span>
<span id="cb21-290"><a href="#cb21-290"></a></span>
<span id="cb21-291"><a href="#cb21-291"></a>So the crude OR is <span class="in">`6`</span>, which indicates a <span class="in">`6-fold`</span> increase in the odds of CHD in smokers compared to non-smokers (ignoring coffee-drinking status).</span>
<span id="cb21-292"><a href="#cb21-292"></a></span>
<span id="cb21-293"><a href="#cb21-293"></a><span class="fu">### Adjusted Odds Ratios - Confounder/Outcome (via stratification) {#sec-aor5}</span></span>
<span id="cb21-294"><a href="#cb21-294"></a></span>
<span id="cb21-295"><a href="#cb21-295"></a>Let us know compare the adjusted 'effects' in coffee-drinkers compared to non-coffee-drinkers.</span>
<span id="cb21-296"><a href="#cb21-296"></a></span>
<span id="cb21-297"><a href="#cb21-297"></a><span class="fu">#### Coffee-drinkers {#sec-aor3}</span></span>
<span id="cb21-298"><a href="#cb21-298"></a></span>
<span id="cb21-299"><a href="#cb21-299"></a>So, the cross-tabulation for the association between coffee-smoking and CHD **in coffee-drinkers**, becomes:</span>
<span id="cb21-300"><a href="#cb21-300"></a></span>
<span id="cb21-301"><a href="#cb21-301"></a>::: {.column width="45%"}</span>
<span id="cb21-304"><a href="#cb21-304"></a><span class="in">```{r}</span></span>
<span id="cb21-305"><a href="#cb21-305"></a>tab <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb21-306"><a href="#cb21-306"></a>  <span class="fu">filter</span>(coffee_drinker <span class="sc">==</span> <span class="st">"yes"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-307"><a href="#cb21-307"></a>  <span class="fu">tabyl</span>(smoker, outcome) <span class="sc">|&gt;</span> </span>
<span id="cb21-308"><a href="#cb21-308"></a>  <span class="fu">adorn_totals</span>(<span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb21-309"><a href="#cb21-309"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"row"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-310"><a href="#cb21-310"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">rounding =</span> <span class="st">"half up"</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-311"><a href="#cb21-311"></a>  <span class="fu">adorn_ns</span>() <span class="sc">|&gt;</span> </span>
<span id="cb21-312"><a href="#cb21-312"></a>  <span class="fu">adorn_title</span>(<span class="st">"combined"</span>)</span>
<span id="cb21-313"><a href="#cb21-313"></a>tab[<span class="dv">1</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-314"><a href="#cb21-314"></a>tab[<span class="dv">1</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-315"><a href="#cb21-315"></a>tab[<span class="dv">2</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-316"><a href="#cb21-316"></a>tab[<span class="dv">2</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-317"><a href="#cb21-317"></a>tab <span class="sc">|&gt;</span> </span>
<span id="cb21-318"><a href="#cb21-318"></a>  <span class="fu">kable</span>(<span class="st">"html"</span>, <span class="at">escape =</span> F) <span class="sc">|&gt;</span> </span>
<span id="cb21-319"><a href="#cb21-319"></a>  <span class="fu">kable_paper</span>(<span class="at">bootstrap_options =</span> <span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span>
<span id="cb21-320"><a href="#cb21-320"></a><span class="in">```</span></span>
<span id="cb21-321"><a href="#cb21-321"></a>:::</span>
<span id="cb21-322"><a href="#cb21-322"></a></span>
<span id="cb21-323"><a href="#cb21-323"></a>::: {.column width="8%"}</span>
<span id="cb21-324"><a href="#cb21-324"></a>:::</span>
<span id="cb21-325"><a href="#cb21-325"></a></span>
<span id="cb21-326"><a href="#cb21-326"></a>::: {.column width="45%"}</span>
<span id="cb21-329"><a href="#cb21-329"></a><span class="in">```{r}</span></span>
<span id="cb21-330"><a href="#cb21-330"></a><span class="co">#| message: false</span></span>
<span id="cb21-331"><a href="#cb21-331"></a><span class="co">#| warning: false</span></span>
<span id="cb21-332"><a href="#cb21-332"></a>df2 <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb21-333"><a href="#cb21-333"></a>  <span class="fu">filter</span>(coffee_drinker <span class="sc">==</span> <span class="st">"yes"</span>)</span>
<span id="cb21-334"><a href="#cb21-334"></a>df2<span class="sc">$</span>smoker <span class="ot">&lt;-</span> <span class="fu">relevel</span>(df2<span class="sc">$</span>smoker, <span class="at">ref =</span> <span class="st">"yes"</span>)</span>
<span id="cb21-335"><a href="#cb21-335"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df2) <span class="sc">+</span></span>
<span id="cb21-336"><a href="#cb21-336"></a> <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(outcome, smoker), <span class="at">fill =</span> smoker)) <span class="sc">+</span></span>
<span id="cb21-337"><a href="#cb21-337"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb21-338"><a href="#cb21-338"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb21-339"><a href="#cb21-339"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">40</span>)</span>
<span id="cb21-340"><a href="#cb21-340"></a><span class="in">```</span></span>
<span id="cb21-341"><a href="#cb21-341"></a>:::</span>
<span id="cb21-342"><a href="#cb21-342"></a></span>
<span id="cb21-343"><a href="#cb21-343"></a>And the adjusted OR is:</span>
<span id="cb21-344"><a href="#cb21-344"></a></span>
<span id="cb21-345"><a href="#cb21-345"></a>$$\text{OR} = \frac{\text{9 x 2}}{\text{1 x 3}} = 6$$</span>
<span id="cb21-346"><a href="#cb21-346"></a></span>
<span id="cb21-347"><a href="#cb21-347"></a>The OR is <span class="in">`6`</span> - in other words the same as the crude estimate.</span>
<span id="cb21-348"><a href="#cb21-348"></a></span>
<span id="cb21-349"><a href="#cb21-349"></a><span class="fu">#### Non-coffee-drinkers {#sec-aor4}</span></span>
<span id="cb21-350"><a href="#cb21-350"></a></span>
<span id="cb21-351"><a href="#cb21-351"></a>Now let's consider the non-coffee-drinkers. The cross-tabulation for the association between smokers and CHD **in non-coffee-drinkers** is:</span>
<span id="cb21-352"><a href="#cb21-352"></a></span>
<span id="cb21-353"><a href="#cb21-353"></a>::: {.column width="45%"}</span>
<span id="cb21-356"><a href="#cb21-356"></a><span class="in">```{r}</span></span>
<span id="cb21-357"><a href="#cb21-357"></a>tab <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb21-358"><a href="#cb21-358"></a>  <span class="fu">filter</span>(coffee_drinker <span class="sc">==</span> <span class="st">"no"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-359"><a href="#cb21-359"></a>  <span class="fu">tabyl</span>(smoker, outcome) <span class="sc">|&gt;</span> </span>
<span id="cb21-360"><a href="#cb21-360"></a>  <span class="fu">adorn_totals</span>(<span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb21-361"><a href="#cb21-361"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"row"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-362"><a href="#cb21-362"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">rounding =</span> <span class="st">"half up"</span>, <span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-363"><a href="#cb21-363"></a>  <span class="fu">adorn_ns</span>() <span class="sc">|&gt;</span> </span>
<span id="cb21-364"><a href="#cb21-364"></a>  <span class="fu">adorn_title</span>(<span class="st">"combined"</span>)</span>
<span id="cb21-365"><a href="#cb21-365"></a>tab[<span class="dv">1</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-366"><a href="#cb21-366"></a>tab[<span class="dv">1</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">1</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-367"><a href="#cb21-367"></a>tab[<span class="dv">2</span>, <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-368"><a href="#cb21-368"></a>tab[<span class="dv">2</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">cell_spec</span>(tab[<span class="dv">2</span>, <span class="dv">3</span>], <span class="at">bold =</span> T)</span>
<span id="cb21-369"><a href="#cb21-369"></a>tab <span class="sc">|&gt;</span> </span>
<span id="cb21-370"><a href="#cb21-370"></a>  <span class="fu">kable</span>(<span class="st">"html"</span>, <span class="at">escape =</span> F) <span class="sc">|&gt;</span> </span>
<span id="cb21-371"><a href="#cb21-371"></a>  <span class="fu">kable_paper</span>(<span class="at">bootstrap_options =</span> <span class="st">"hover"</span>, <span class="at">full_width =</span> F)</span>
<span id="cb21-372"><a href="#cb21-372"></a><span class="in">```</span></span>
<span id="cb21-373"><a href="#cb21-373"></a>:::</span>
<span id="cb21-374"><a href="#cb21-374"></a></span>
<span id="cb21-375"><a href="#cb21-375"></a>::: {.column width="8%"}</span>
<span id="cb21-376"><a href="#cb21-376"></a>:::</span>
<span id="cb21-377"><a href="#cb21-377"></a></span>
<span id="cb21-378"><a href="#cb21-378"></a>::: {.column width="45%"}</span>
<span id="cb21-381"><a href="#cb21-381"></a><span class="in">```{r}</span></span>
<span id="cb21-382"><a href="#cb21-382"></a><span class="co">#| message: false</span></span>
<span id="cb21-383"><a href="#cb21-383"></a><span class="co">#| warning: false</span></span>
<span id="cb21-384"><a href="#cb21-384"></a>df2 <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb21-385"><a href="#cb21-385"></a>  <span class="fu">filter</span>(coffee_drinker <span class="sc">==</span> <span class="st">"no"</span>)</span>
<span id="cb21-386"><a href="#cb21-386"></a>df2<span class="sc">$</span>smoker <span class="ot">&lt;-</span> <span class="fu">relevel</span>(df2<span class="sc">$</span>smoker, <span class="at">ref =</span> <span class="st">"yes"</span>)</span>
<span id="cb21-387"><a href="#cb21-387"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df2) <span class="sc">+</span></span>
<span id="cb21-388"><a href="#cb21-388"></a> <span class="fu">geom_mosaic</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">product</span>(outcome, smoker), <span class="at">fill =</span> smoker)) <span class="sc">+</span></span>
<span id="cb21-389"><a href="#cb21-389"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb21-390"><a href="#cb21-390"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb21-391"><a href="#cb21-391"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">40</span>)</span>
<span id="cb21-392"><a href="#cb21-392"></a><span class="in">```</span></span>
<span id="cb21-393"><a href="#cb21-393"></a>:::</span>
<span id="cb21-394"><a href="#cb21-394"></a></span>
<span id="cb21-395"><a href="#cb21-395"></a>And the adjusted OR is:</span>
<span id="cb21-396"><a href="#cb21-396"></a></span>
<span id="cb21-397"><a href="#cb21-397"></a>$$\text{OR} = \frac{\text{3 x 14}}{\text{7 x 1}} = 6$$</span>
<span id="cb21-398"><a href="#cb21-398"></a></span>
<span id="cb21-399"><a href="#cb21-399"></a>The OR is again <span class="in">`6`</span>! Is this starting to make some sense?</span>
<span id="cb21-400"><a href="#cb21-400"></a></span>
<span id="cb21-401"><a href="#cb21-401"></a><span class="fu">#### Salient points</span></span>
<span id="cb21-402"><a href="#cb21-402"></a></span>
<span id="cb21-403"><a href="#cb21-403"></a>Again, there are two important points to make in the comparison of these crude and adjusted estimates:</span>
<span id="cb21-404"><a href="#cb21-404"></a></span>
<span id="cb21-405"><a href="#cb21-405"></a><span class="ss">1.  </span>It doesn't seem to matter whether we adjust for coffee-drinking or not, the association between smoking and CHD remains the same.</span>
<span id="cb21-406"><a href="#cb21-406"></a><span class="ss">2.  </span>It then follows that coffee-drinking is not a confounder in the smoking-CHD relationship.</span>
<span id="cb21-407"><a href="#cb21-407"></a></span>
<span id="cb21-408"><a href="#cb21-408"></a><span class="fu">### Adjusted Odds Ratio - Overall</span></span>
<span id="cb21-409"><a href="#cb21-409"></a></span>
<span id="cb21-410"><a href="#cb21-410"></a>It just so happens that the adjusted OR's from <span class="co">[</span><span class="ot">Section @sec-aor</span><span class="co">]</span> are the same in each subgroup, but this is an exception rather than a rule. Normally, in the presence of confounding, effect estimates will differ in each subgroup to the crude estimate but will **not** be equal to each other. What do we do with separate effect estimates from each subgroup - this makes reporting somewhat painful, surely? Well, if the adjusted estimates aren't too different from each other, they can be combined in a weighted manner to provide an overall summary estimate and this can be done using the <span class="co">[</span><span class="ot">Cochran-Mantel-Haenszel</span><span class="co">](https://en.wikipedia.org/wiki/Cochran–Mantel–Haenszel_statistics)</span> (CMH) test. I won't illustrate this here as in the modern computing age there is really no need to be crunching this statistic anymore, and we use a statistical model instead.</span>
<span id="cb21-411"><a href="#cb21-411"></a></span>
<span id="cb21-412"><a href="#cb21-412"></a>As I alluded to above, we should only attempt to combine individual estimates when they are 'similar'. But what does that mean? How similar *should* they be and how different *can* they be? There are no hard and fast rules but I will outline a couple of guidelines at the end of this post. The important thing is to realise that when individual estimates are different, this actually represents an **effect modification/interaction** effect - that is the strength of the association between the exposure and the outcome *depends* on the level of the third variable. Interaction effects are of interest (scientifically and clinically) and we shouldn't try to cancel them out by averaging over them.</span>
<span id="cb21-413"><a href="#cb21-413"></a></span>
<span id="cb21-414"><a href="#cb21-414"></a><span class="fu">## Statistical Modelling Approach</span></span>
<span id="cb21-415"><a href="#cb21-415"></a></span>
<span id="cb21-416"><a href="#cb21-416"></a>The cross-tabulation approach is great for expository purposes but is limiting in the types of relationships you can practically explore - things just become unwieldy with variables that contain more than two categories and impossible with continuous variables.</span>
<span id="cb21-417"><a href="#cb21-417"></a></span>
<span id="cb21-418"><a href="#cb21-418"></a>So, we tend to use statistical models instead. These make confounder control/adjustment easy - we just need to include the potential confounder in the model along with our exposure of interest. Let's now replicate everything we have done thus far, but in a modelling-paradigm.</span>
<span id="cb21-419"><a href="#cb21-419"></a></span>
<span id="cb21-420"><a href="#cb21-420"></a><span class="fu">### Crude Odds Ratio - Exposure/Outcome</span></span>
<span id="cb21-421"><a href="#cb21-421"></a></span>
<span id="cb21-424"><a href="#cb21-424"></a><span class="in">```{r}</span></span>
<span id="cb21-425"><a href="#cb21-425"></a><span class="fu">glm</span>(outcome <span class="sc">~</span> coffee_drinker, <span class="at">data =</span> df, <span class="at">family =</span> <span class="st">"binomial"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-426"><a href="#cb21-426"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> T)</span>
<span id="cb21-427"><a href="#cb21-427"></a><span class="in">```</span></span>
<span id="cb21-428"><a href="#cb21-428"></a></span>
<span id="cb21-429"><a href="#cb21-429"></a>We get the same OR as in <span class="co">[</span><span class="ot">Section @sec-cor1</span><span class="co">]</span> in addition to a 95% C.I. and p-value.</span>
<span id="cb21-430"><a href="#cb21-430"></a></span>
<span id="cb21-431"><a href="#cb21-431"></a><span class="fu">### Adjusted Odds Ratios - Exposure/Outcome (via stratification)</span></span>
<span id="cb21-432"><a href="#cb21-432"></a></span>
<span id="cb21-433"><a href="#cb21-433"></a>We can replicate a stratified effect in our modelling by subsetting the data to select only those people in each smoking subgroup.</span>
<span id="cb21-434"><a href="#cb21-434"></a></span>
<span id="cb21-435"><a href="#cb21-435"></a><span class="fu">#### Smokers</span></span>
<span id="cb21-436"><a href="#cb21-436"></a></span>
<span id="cb21-439"><a href="#cb21-439"></a><span class="in">```{r}</span></span>
<span id="cb21-440"><a href="#cb21-440"></a><span class="fu">glm</span>(outcome <span class="sc">~</span> coffee_drinker, <span class="at">data =</span> <span class="fu">subset</span>(df, smoker <span class="sc">==</span> <span class="st">"yes"</span>), <span class="at">family =</span> <span class="st">"binomial"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-441"><a href="#cb21-441"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> T)</span>
<span id="cb21-442"><a href="#cb21-442"></a><span class="in">```</span></span>
<span id="cb21-443"><a href="#cb21-443"></a></span>
<span id="cb21-444"><a href="#cb21-444"></a>OR = <span class="in">`1`</span> (compare to <span class="co">[</span><span class="ot">Section @sec-aor1</span><span class="co">]</span>)</span>
<span id="cb21-445"><a href="#cb21-445"></a></span>
<span id="cb21-446"><a href="#cb21-446"></a><span class="fu">#### Non-smokers</span></span>
<span id="cb21-447"><a href="#cb21-447"></a></span>
<span id="cb21-450"><a href="#cb21-450"></a><span class="in">```{r}</span></span>
<span id="cb21-451"><a href="#cb21-451"></a><span class="fu">glm</span>(outcome <span class="sc">~</span> coffee_drinker, <span class="at">data =</span> <span class="fu">subset</span>(df, smoker <span class="sc">==</span> <span class="st">"no"</span>), <span class="at">family =</span> <span class="st">"binomial"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-452"><a href="#cb21-452"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> T)</span>
<span id="cb21-453"><a href="#cb21-453"></a><span class="in">```</span></span>
<span id="cb21-454"><a href="#cb21-454"></a></span>
<span id="cb21-455"><a href="#cb21-455"></a>OR = <span class="in">`1`</span> (compare to <span class="co">[</span><span class="ot">Section @sec-aor2</span><span class="co">]</span>)</span>
<span id="cb21-456"><a href="#cb21-456"></a></span>
<span id="cb21-457"><a href="#cb21-457"></a><span class="fu">### Crude Odds Ratio - Confounder/Outcome</span></span>
<span id="cb21-458"><a href="#cb21-458"></a></span>
<span id="cb21-461"><a href="#cb21-461"></a><span class="in">```{r}</span></span>
<span id="cb21-462"><a href="#cb21-462"></a><span class="fu">glm</span>(outcome <span class="sc">~</span> smoker, <span class="at">data =</span> df, <span class="at">family =</span> <span class="st">"binomial"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-463"><a href="#cb21-463"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> T)</span>
<span id="cb21-464"><a href="#cb21-464"></a><span class="in">```</span></span>
<span id="cb21-465"><a href="#cb21-465"></a></span>
<span id="cb21-466"><a href="#cb21-466"></a>OR = <span class="in">`6`</span> (compare to <span class="co">[</span><span class="ot">Section @sec-cor2</span><span class="co">]</span>)</span>
<span id="cb21-467"><a href="#cb21-467"></a></span>
<span id="cb21-468"><a href="#cb21-468"></a><span class="fu">### Adjusted Odds Ratios - Confounder/Outcome (via stratification)</span></span>
<span id="cb21-469"><a href="#cb21-469"></a></span>
<span id="cb21-470"><a href="#cb21-470"></a><span class="fu">#### Coffee-drinkers</span></span>
<span id="cb21-471"><a href="#cb21-471"></a></span>
<span id="cb21-474"><a href="#cb21-474"></a><span class="in">```{r}</span></span>
<span id="cb21-475"><a href="#cb21-475"></a><span class="fu">glm</span>(outcome <span class="sc">~</span> smoker, <span class="at">data =</span> <span class="fu">subset</span>(df, coffee_drinker <span class="sc">==</span> <span class="st">"yes"</span>), <span class="at">family =</span> <span class="st">"binomial"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-476"><a href="#cb21-476"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> T)</span>
<span id="cb21-477"><a href="#cb21-477"></a><span class="in">```</span></span>
<span id="cb21-478"><a href="#cb21-478"></a></span>
<span id="cb21-479"><a href="#cb21-479"></a>OR = <span class="in">`6`</span> (compare to <span class="co">[</span><span class="ot">Section @sec-aor3</span><span class="co">]</span>)</span>
<span id="cb21-480"><a href="#cb21-480"></a></span>
<span id="cb21-481"><a href="#cb21-481"></a><span class="fu">#### Non-coffee-drinkers</span></span>
<span id="cb21-482"><a href="#cb21-482"></a></span>
<span id="cb21-485"><a href="#cb21-485"></a><span class="in">```{r}</span></span>
<span id="cb21-486"><a href="#cb21-486"></a><span class="fu">glm</span>(outcome <span class="sc">~</span> smoker, <span class="at">data =</span> <span class="fu">subset</span>(df, coffee_drinker <span class="sc">==</span> <span class="st">"no"</span>), <span class="at">family =</span> <span class="st">"binomial"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-487"><a href="#cb21-487"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> T)</span>
<span id="cb21-488"><a href="#cb21-488"></a><span class="in">```</span></span>
<span id="cb21-489"><a href="#cb21-489"></a></span>
<span id="cb21-490"><a href="#cb21-490"></a>OR = <span class="in">`6`</span> (compare to <span class="co">[</span><span class="ot">Section @sec-aor4</span><span class="co">]</span>)</span>
<span id="cb21-491"><a href="#cb21-491"></a></span>
<span id="cb21-492"><a href="#cb21-492"></a><span class="fu">### Adjusted Odds Ratio - Overall</span></span>
<span id="cb21-493"><a href="#cb21-493"></a></span>
<span id="cb21-494"><a href="#cb21-494"></a>The above models are all considered univariable in that one predictor only is specified in each model. In controlling or adjusting for a third variable we now produce a multivariable model where both the exposure and potential confounder are specified as predictors. This automatically produces an adjusted 'effect' of coffee drinking on CHD, controlling for smoking (and conversely an adjusted 'effect' of smoking on CHD, controlling for coffee drinking). We run these kinds of models all the time without thinking, but what the model is doing 'under the hood' is calculating a weighted average of the individual subgroup estimates in producing a single coefficient that becomes our effect/s of interest.</span>
<span id="cb21-495"><a href="#cb21-495"></a></span>
<span id="cb21-498"><a href="#cb21-498"></a><span class="in">```{r}</span></span>
<span id="cb21-499"><a href="#cb21-499"></a><span class="fu">glm</span>(outcome <span class="sc">~</span> coffee_drinker <span class="sc">+</span> smoker, <span class="at">data =</span> df, <span class="at">family =</span> <span class="st">"binomial"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-500"><a href="#cb21-500"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> T)</span>
<span id="cb21-501"><a href="#cb21-501"></a><span class="in">```</span></span>
<span id="cb21-502"><a href="#cb21-502"></a></span>
<span id="cb21-503"><a href="#cb21-503"></a><span class="fu">## Some Guidelines...</span></span>
<span id="cb21-504"><a href="#cb21-504"></a></span>
<span id="cb21-505"><a href="#cb21-505"></a>To consolidate the ideas that we have explored today I want to lay out some very broad guidelines for how to interpret and compare crude and adjusted effects.</span>
<span id="cb21-506"><a href="#cb21-506"></a></span>
<span id="cb21-507"><a href="#cb21-507"></a><span class="fu">### No Confounding or Effect Modification Present</span></span>
<span id="cb21-508"><a href="#cb21-508"></a></span>
<span id="cb21-509"><a href="#cb21-509"></a>If there is neither confounding nor effect modification, the crude estimate of association and the stratum-specific estimates will be similar (converging to being the same in the ideal context). This is reflected in <span class="co">[</span><span class="ot">Sections @sec-cor2</span><span class="co">]</span> and <span class="co">[</span><span class="ot">@sec-aor5</span><span class="co">]</span> above.</span>
<span id="cb21-510"><a href="#cb21-510"></a></span>
<span id="cb21-511"><a href="#cb21-511"></a><span class="fu">### Only Confounding Present</span></span>
<span id="cb21-512"><a href="#cb21-512"></a></span>
<span id="cb21-513"><a href="#cb21-513"></a>If there is only confounding, the stratum-specific measures of association will be similar to one another, but they will be different from the overall crude estimate (by ~ 10% or more). In this situation, one can use CMH methods to calculate a weighted estimate and p-value, or even easier is to run a statistical model including the confounder as just another covariate. i.e. (in <span class="in">`R`</span>)</span>
<span id="cb21-514"><a href="#cb21-514"></a></span>
<span id="cb21-515"><a href="#cb21-515"></a><span class="in">`mod1 &lt;- lm(outcome ~ exposure + confounder, data = dat)`</span></span>
<span id="cb21-516"><a href="#cb21-516"></a></span>
<span id="cb21-517"><a href="#cb21-517"></a>This is reflected in <span class="co">[</span><span class="ot">Sections @sec-cor1</span><span class="co">]</span> and <span class="co">[</span><span class="ot">@sec-aor</span><span class="co">]</span> above.</span>
<span id="cb21-518"><a href="#cb21-518"></a></span>
<span id="cb21-519"><a href="#cb21-519"></a><span class="fu">### Confounding and/or Effect Modification Present</span></span>
<span id="cb21-520"><a href="#cb21-520"></a></span>
<span id="cb21-521"><a href="#cb21-521"></a>In this case the stratum-specific estimates will differ from one another significantly and these will also differ from the overall crude estimate. These effects should be reported as they are and **not** weighted and combined (i.e. averaged over) as this is of scientific and clinical interest in its own right. In practical terms in a statistical model, an interaction term should be specified. This changes the coding from:</span>
<span id="cb21-522"><a href="#cb21-522"></a></span>
<span id="cb21-523"><a href="#cb21-523"></a><span class="in">`mod1 &lt;- lm(outcome ~ exposure + confounder, data = dat)`</span></span>
<span id="cb21-524"><a href="#cb21-524"></a></span>
<span id="cb21-525"><a href="#cb21-525"></a>to</span>
<span id="cb21-526"><a href="#cb21-526"></a></span>
<span id="cb21-527"><a href="#cb21-527"></a><span class="in">`mod2 &lt;- lm(outcome ~ exposure * confounder, data = dat)`</span></span>
<span id="cb21-528"><a href="#cb21-528"></a></span>
<span id="cb21-529"><a href="#cb21-529"></a>As the two models are 'nested', an assessment of whether the interaction term is necessary or not can be performed using a likelihood ratio test:</span>
<span id="cb21-530"><a href="#cb21-530"></a></span>
<span id="cb21-531"><a href="#cb21-531"></a><span class="in">`anova(mod2, mod1)`</span></span>
<span id="cb21-532"><a href="#cb21-532"></a></span>
<span id="cb21-533"><a href="#cb21-533"></a>If the p-value is significant you can conclude that the interaction term increases the explanatory power of the model and should be retained.</span>
<span id="cb21-534"><a href="#cb21-534"></a></span>
<span id="cb21-535"><a href="#cb21-535"></a><span class="fu">## The End!</span></span>
<span id="cb21-536"><a href="#cb21-536"></a></span>
<span id="cb21-537"><a href="#cb21-537"></a>Another post that has gone on longer than I had anticipated - there is much more I could talk about on the topic but my goal is not to make you fall asleep on your keyboard. Hopefully this has helped to make the concept of confounding just that little bit clearer in your mind. Until next time...  </span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>